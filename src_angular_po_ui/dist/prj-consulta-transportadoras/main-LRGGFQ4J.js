import{$ as k,A as S,B as A,Ba as Ce,C as be,Ca as ft,Da as T,Ea as de,Fa as re,G as w,Ga as ue,H as B,Ha as vt,I as U,Ia as yt,J as q,Ja as bt,K as Ke,Ka as St,L as h,La as Pt,M as _,Ma as Ne,N as G,Na as X,O as Ye,Oa as _t,P as b,Pa as Ct,Q as K,Qa as wt,R as De,Ra as we,S as Xe,Sa as kt,T as Ze,Ta as Z,U as et,V as tt,W as Se,X as it,Y as F,Z as ot,_ as nt,a as f,aa as Y,b as C,ba as ie,c as Ee,ca as se,d as I,da as Le,e as We,ea as oe,f as ge,fa as rt,g as j,ga as st,h as Je,ha as at,i as N,ia as ne,j as $e,ja as lt,k as te,ka as ct,l as fe,la as ae,m as ve,ma as le,n as g,na as xe,o as d,oa as Fe,p as c,pa as ce,q as Qe,r as Q,ra as Pe,s as Ge,sa as pt,t as R,ta as _e,u as V,ua as dt,v as z,va as ut,w as u,wa as ht,x as ye,xa as pe,y as x,ya as mt,z as y,za as gt}from"./chunk-YS6E6MKU.js";var ke=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=z({type:i,selectors:[["app-about"]],decls:18,vars:0,consts:[["p-label","Ajuda e Sobre o Projeto","p-value",""],["p-label","Cursos do Terminal de Informa\xE7\xE3o ( terminaldeinformacao.com/assinatura )","p-url","https://terminaldeinformacao.com/assinatura","p-open-new-tab","true"],["p-label","desse link","p-url","https://atiliosistemas.com/contato","p-open-new-tab","true"]],template:function(e,t){e&1&&(A(0,"po-info",0),y(1,"p"),w(2,"Esse teste de PO UI foi elaborado pela Atilio Sistemas. Se gosta do nosso trabalho, considere em apoiar conhecendo a nossa assinatura de "),A(3,"po-link",1),w(4,"."),S(),y(5,"p"),w(6,"Nesse projeto, ser\xE1 demonstrado em como consultar informa\xE7\xF5es da tabela de Transportadoras (SA4)."),S(),y(7,"p"),w(8,"Esperamos que goste dos conte\xFAdos."),S(),y(9,"p"),w(10,"Em caso de d\xFAvidas, entre em contato atrav\xE9s "),A(11,"po-link",2),w(12,"."),S(),A(13,"br"),y(14,"p"),w(15,"--"),S(),y(16,"p"),w(17,"Daniel Atilio"),S())},dependencies:[mt,at,re,de],encapsulation:2})};var Ae=class i{constructor(m,e){this.http=m;this.poNotification=e}a4Cod="";a4Nome="";a4Email="";a4HPage="";a4Contato="";validSA4(){this.poNotification.setDefaultDuration(4e3);var m="",e="",t,o="",n,r={};e=sessionStorage.getItem("ERPAPPCONFIG")??"",t=JSON.parse(e),m=t.api_baseUrl,o=sessionStorage.getItem("ERPTOKEN")??"",n=JSON.parse(o),r={headers:new _({"Content-Type":"application/json",Authorization:"Bearer "+n.access_token})},this.a4Nome="",this.a4Email="",this.a4HPage="",this.a4Contato="",this.a4Cod.trim().length===0?console.log("N\xE3o foi informado transportadora"):this.http.get(m+"/zWSSA4/get_id?id="+this.a4Cod,r).subscribe({next:p=>{this.poNotification.success("Transportadora encontrada com sucesso!"),this.a4Nome=p.nome,this.a4Email=p.email,this.a4HPage=p.hpage,this.a4Contato=p.contato},error:p=>{this.poNotification.error("Transportadora n\xE3o encontrada!"),console.error("Falha buscar os dados: "+p)},complete:()=>{console.log("Busca dos dados completa")}})}static \u0275fac=function(e){return new(e||i)(V(b),V(pe))};static \u0275cmp=z({type:i,selectors:[["app-view"]],decls:14,vars:11,consts:[["p-label","Visualiza\xE7\xE3o de Transportadoras"],[1,"po-row"],[1,"po-md-2"],["name","a4Cod","p-label","C\xF3digo","p-required","true","p-upper-case","true",3,"ngModelChange","p-blur","p-show-required","ngModel","p-maxlength"],[1,"po-md-6"],["name","a4Nome","p-label","Nome","p-readonly","true",3,"ngModelChange","ngModel","p-maxlength"],[1,"po-md-4"],["name","a4Email","p-label","e-Mail","p-readonly","true",3,"ngModelChange","ngModel","p-maxlength"],["name","a4HPage","p-label","Site","p-readonly","true",3,"ngModelChange","ngModel","p-maxlength"],[1,"po-md-3"],["name","a4Contato","p-label","Contato","p-readonly","true",3,"ngModelChange","ngModel","p-maxlength"]],template:function(e,t){e&1&&(A(0,"po-info",0),y(1,"div",1)(2,"div",2)(3,"po-input",3),q("ngModelChange",function(n){return U(t.a4Cod,n)||(t.a4Cod=n),n}),be("p-blur",function(){return t.validSA4()}),S()()(),y(4,"div",1)(5,"div",4)(6,"po-input",5),q("ngModelChange",function(n){return U(t.a4Nome,n)||(t.a4Nome=n),n}),S()(),y(7,"div",6)(8,"po-input",7),q("ngModelChange",function(n){return U(t.a4Email,n)||(t.a4Email=n),n}),S()()(),y(9,"div",1)(10,"div",6)(11,"po-input",8),q("ngModelChange",function(n){return U(t.a4HPage,n)||(t.a4HPage=n),n}),S()(),y(12,"div",9)(13,"po-input",10),q("ngModelChange",function(n){return U(t.a4Contato,n)||(t.a4Contato=n),n}),S()()()),e&2&&(R(3),x("p-show-required",!0),B("ngModel",t.a4Cod),x("p-maxlength",6),R(3),B("ngModel",t.a4Nome),x("p-maxlength",40),R(2),B("ngModel",t.a4Email),x("p-maxlength",30),R(3),B("ngModel",t.a4HPage),x("p-maxlength",30),R(2),B("ngModel",t.a4Contato),x("p-maxlength",15))},dependencies:[re,de,T,Ce,k,ot,nt,Ze],encapsulation:2})};var At=[{path:"about",title:"Sobre o Projeto",component:ke},{path:"view",title:"Visualiza\xE7\xE3o do Cadastro",component:Ae}];var Mt={providers:[it(At),De(),Qe([kt]),{provide:"Window",useValue:window},Ke({eventCoalescing:!0}),De(Xe())]};var Pi=function(i){return typeof i=="function"},Et=function(){function i(){this._subs=[]}return i.prototype.add=function(){for(var m=[],e=0;e<arguments.length;e++)m[e]=arguments[e];this._subs=this._subs.concat(m)},Object.defineProperty(i.prototype,"sink",{set:function(m){this._subs.push(m)},enumerable:!0,configurable:!0}),i.prototype.unsubscribe=function(){this._subs.forEach(function(m){return m&&Pi(m.unsubscribe)&&m.unsubscribe()}),this._subs=[]},i}();function Gi(i,m){if(i){let e=i.getMonth()+1,t=i.getDate()<10?"0"+i.getDate():i.getDate(),o=e<10?"0"+e:e,n=Ki(i.getFullYear()),r=i.toString();return m?n+"-"+o+"-"+t+m:n+"-"+o+"-"+t+"T"+r.substring(16,24)+r.substring(28,31)+":"+r.substring(31,33)}else return null}function Ki(i){if(i>=1e3)return i.toString();if(i>99&&i<1e3)return`0${i}`;if(i>9&&i<100)return`00${i}`;if(i>=0&&i<10)return`000${i}`}function H(i){return i?i<10?`0${i}`:i:"00"}var zt=function(i){return i.All="all",i.Email="email",i.SMS="sms",i}(zt||{});var vr=zt.Email;var Yi=(()=>{class i{http;constructor(e){this.http=e}post(e,t,o){return this.http.post(e,t,{observe:"response",params:o})}static \u0275fac=function(t){return new(t||i)(c(b))};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Dt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({providers:[_e,Yi],imports:[h,k,T,Pe,se]})}return i})();var he=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({imports:[h,k,F,ie,T,yt]})}return i})(),Bt=function(i){return i.None="none",i.ExceededAttempts="exceededAttempts",i.ExpiredPassword="expiredPassword",i}(Bt||{}),yr=Bt.None;var Lt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({imports:[h,F,Z,he]})}return i})();var Xi=(()=>{class i{http;constructor(e){this.http=e}post(e,t){return this.http.post(e,t,{observe:"response"})}static \u0275fac=function(t){return new(t||i)(c(b))};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var xt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({providers:[Xi],imports:[h,k,F,Z,he]})}return i})(),Zi={en:{errorRenderPage:"Error loading page",notPossibleLoadMetadataPage:"The page metadata could not be loaded"},es:{errorRenderPage:"Error al cargar la p\xE1gina",notPossibleLoadMetadataPage:"No se pudieron cargar los metadatos de la p\xE1gina."},pt:{errorRenderPage:"Erro ao carregar a p\xE1gina",notPossibleLoadMetadataPage:"N\xE3o foi poss\xEDvel carregar os metadados da p\xE1gina"},ru:{errorRenderPage:"\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B",notPossibleLoadMetadataPage:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u044B"}},eo=(()=>{class i{http;notification;headers=new _({"X-PO-SCREEN-LOCK":"true"});endpoint="/";language;metadata;constructor(e,t,o){this.http=e,this.notification=t,this.language=o.getShortLanguage()}configServiceApi(e={}){this.endpoint=e.endpoint,this.metadata=e.metadata||this.metadata}getMetadata(e="list"){let t=`${this.endpoint}-${e}-metadata`,o=JSON.parse(localStorage.getItem(t))||{},r=`${this.metadata||`${this.endpoint}/metadata`}?type=${e}&version=${o.version||""}`;return this.http.get(r).pipe(N(p=>p.version!==void 0&&p.version===o.version?o:(localStorage.setItem(t,JSON.stringify(p)),f(f({},o),p))),te(p=>{if(Object.keys(o).length)return j(o);let{errorRenderPage:v,notPossibleLoadMetadataPage:P}=Zi[this.language];return this.notification.warning(P),$e(j({title:v}),Je(p))}))}deleteResource(e,t){let o=this.getLocalEndPoint(t,!0),n=e?`${o}/${e}`:o;return this.http.delete(n,{headers:this.headers})}deleteResources(e,t){return this.http.request("delete",`${this.getLocalEndPoint(t)}`,{headers:this.headers,body:e})}getResources(e,t){return this.http.get(this.getLocalEndPoint(t),{headers:this.headers,params:e})}getResource(e,t){return this.http.get(`${this.getLocalEndPoint(t,!0)}/${e}`,{headers:this.headers})}createResource(e,t){return this.http.post(`${this.getLocalEndPoint(t)}`,e,{headers:this.headers})}updateResource(e,t,o){return this.http.put(`${this.getLocalEndPoint(o,!0)}/${e}`,t,{headers:this.headers})}getLocalEndPoint(e,t=!1){return e=e??this.endpoint,t&&(e=e==="/"?"":e),e}static \u0275fac=function(t){return new(t||i)(c(b),c(pe),c(Le))};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var to=(()=>{class i{http;constructor(e){this.http=e}getCustomOptions(e,t,o){return this.createObservable(e).pipe(N(n=>this.mergePageOptions(t,n,o)))}changeOriginalOptionsToNewOptions(e,t){Object.keys(t).forEach(o=>{let n=t[o];if(o in e){if(Array.isArray(n)){e[o]=[...n];return}if(typeof n=="number"||typeof n=="string"||typeof n=="boolean"){e[o]=n;return}n!==null&&typeof n=="object"&&(e[o]=f({},n))}})}createObservable(e){return typeof e=="string"?this.http.post(e,{}):ge(Promise.resolve(e()))}mergePageOptions(e,t,o){let n=o.schema.reduce((r,p)=>C(f({},r),{[p.nameProp]:this.createNewProp(p,e,t)}),{});return Object.keys(n).forEach(r=>n[r]===void 0&&delete n[r]),n}createNewProp(e,t,o){return e.merge?this.mergeOptions(t[e.nameProp],o[e.nameProp],e.keyForMerge):o[e.nameProp]??t[e.nameProp]}mergeOptions(e,t,o){if(!(!e&&!t))return t?e?e instanceof Array&&t instanceof Array?this.mergeOptionsArray(e,t,o):f(f({},e),t):t:e}mergeOptionsArray(e,t,o){let n=t.filter(p=>!e.find(v=>v[o]===p[o]));return[...e.map(p=>{let v=t.find(P=>p[o]===P[o])||p;return f(f({},p),v)}),...n]}static \u0275fac=function(t){return new(t||i)(c(b))};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Oe=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({providers:[eo],imports:[h]})}return i})(),Ft=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({imports:[h,k,F,ue,se,Pe,X,we,Oe]})}return i})();var Nt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({imports:[h,k,F,ce,ie,ue,vt,se,X,we,Oe]})}return i})(),Ut=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({providers:[to],imports:[h]})}return i})(),M={en:{title:"Advanced search",cancelLabel:"Cancel",confirmLabel:"Apply filters"},es:{title:"B\xFAsqueda avanzada",cancelLabel:"Cancelar",confirmLabel:"Aplicar filtros"},pt:{title:"Busca avan\xE7ada",cancelLabel:"Cancelar",confirmLabel:"Aplicar filtros"},ru:{title:"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043D\u043D\u044B\u0439 \u043F\u043E\u0438\u0441\u043A",cancelLabel:"\u043E\u0442\u043C\u0435\u043D\u0438\u0442\u044C",confirmLabel:"\u041F\u0440\u0438\u043C\u0435\u043D\u0438\u0442\u044C \u0444\u0438\u043B\u044C\u0442\u0440\u044B"}};var br={en:{disclaimerGroupTitle:"Displaying results filtered by:",filterTitle:M.en.title,filterCancelLabel:M.en.cancelLabel,filterConfirmLabel:M.en.confirmLabel,quickSearchLabel:"Quick search:",searchPlaceholder:"Search"},es:{disclaimerGroupTitle:"Presentando resultados filtrados por:",filterTitle:M.es.title,filterCancelLabel:M.es.cancelLabel,filterConfirmLabel:M.es.confirmLabel,quickSearchLabel:"B\xFAsqueda r\xE1pida:",searchPlaceholder:"Buscar"},pt:{disclaimerGroupTitle:"Apresentando resultados filtrados por:",filterTitle:M.pt.title,filterCancelLabel:M.pt.cancelLabel,filterConfirmLabel:M.pt.confirmLabel,quickSearchLabel:"Pesquisa r\xE1pida:",searchPlaceholder:"Pesquisar"},ru:{disclaimerGroupTitle:"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0440\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u043E\u0432, \u043E\u0442\u0444\u0438\u043B\u044C\u0442\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0445 \u043F\u043E:",filterTitle:M.ru.title,filterCancelLabel:M.ru.cancelLabel,filterConfirmLabel:M.ru.confirmLabel,quickSearchLabel:"\u0411\u044B\u0441\u0442\u0440\u044B\u0439 \u043F\u043E\u0438\u0441\u043A:",searchPlaceholder:"\u0438\u0441\u0441\u043B\u0435\u0434\u043E\u0432\u0430\u043D\u0438\u0435"}};var Re=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({imports:[h,k,F,ue,st,Pe,X,Ut]})}return i})();var Rt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({imports:[h,k,F,ft,Re,Ut,Oe]})}return i})();var qt=(()=>{class i{http;headers=new _({"X-PO-SCREEN-LOCK":"true"});endpoint="/";constructor(e){this.http=e}configServiceApi(e={}){this.endpoint=e.endpoint}createResource(e){let t=this.convertToJobScheduler(e);return this.http.post(`${this.endpoint}`,t,{headers:this.headers})}getHeadProcesses(){let e={"X-PO-No-Error":"true"};return this.http.head(`${this.endpoint}/processes`,{headers:e})}getParametersByProcess(e){return this.http.get(`${this.endpoint}/processes/${e}/parameters`,{headers:this.headers}).pipe(N(t=>t.items))}getProcess(e){return this.http.get(`${this.endpoint}/processes/${e}`,{headers:this.headers})}getProcesses(e={}){return this.http.get(`${this.endpoint}/processes`,{params:e})}getResource(e){return this.http.get(`${this.endpoint}/${e}`,{headers:this.headers}).pipe(N(t=>this.convertToJobSchedulerInternal(t)))}updateResource(e,t){let o=this.convertToJobScheduler(t);return this.http.put(`${this.endpoint}/${e}`,o,{headers:this.headers})}convertToJobScheduler(e){let t=f({},e);if(e.periodicity&&(e.periodicity==="single"?t.recurrent=!1:Object.assign(t,this.convertToPeriodicity(e))),e.firstExecutionHour&&(t.firstExecution=this.replaceHourFirstExecution(e.firstExecution,e.firstExecutionHour)),e.frequency&&e.frequency.type){if(t.rangeExecutions={frequency:f({},e.frequency)},e.rangeLimitHour){let o=e.rangeLimitHour.split(":");t.rangeExecutions.rangeLimit={hour:parseInt(o[0],10),minute:parseInt(o[1],10)}}e.rangeLimitDay&&(t.rangeExecutions.rangeLimit=C(f({},t.rangeExecutions.rangeLimit),{day:e.rangeLimitDay}))}return Object.keys(this.returnValidExecutionParameter(t.executionParameter)).length||delete t.executionParameter,this.removeInvalidKeys(t),t}convertToJobSchedulerInternal(e={}){let t=f({},e);return e.firstExecution&&(t.firstExecutionHour=this.getHourFirstExecution(e.firstExecution)),Object.assign(t,this.convertToPeriodicityInternal(e)),e.rangeExecutions&&(t.rangeLimitHour=`${e.rangeExecutions.rangeLimit.hour<10?"0"+e.rangeExecutions.rangeLimit.hour:e.rangeExecutions.rangeLimit.hour}:${e.rangeExecutions.rangeLimit.minute<10?"0"+e.rangeExecutions.rangeLimit.minute:e.rangeExecutions.rangeLimit.minute}`,t.rangeLimitDay=e.rangeExecutions.rangeLimit.day,t.frequency={type:e.rangeExecutions.frequency.type,value:e.rangeExecutions.frequency.value}),this.removeInvalidKeys(t,["weekly","monthly","daily"]),t}convertToPeriodicity(e){let t={},o=e.periodicity;return o&&(t[o]={},o==="monthly"?t[o].day=e.dayOfMonth?parseInt(e.dayOfMonth,10):0:o==="weekly"&&(t[o].daysOfWeek=e.daysOfWeek),t[o].hour=e.hour?parseInt(e.hour.split(":")[0],10):0,t[o].minute=e.hour?parseInt(e.hour.split(":")[1],10):0),t}convertToPeriodicityInternal(e={}){return e.monthly?{periodicity:"monthly",hour:`${H(e.monthly.hour)}:${H(e.monthly.minute)}`,dayOfMonth:e.monthly.day}:e.daily?{periodicity:"daily",hour:`${H(e.daily.hour)}:${H(e.daily.minute)}`}:e.weekly?{periodicity:"weekly",hour:`${H(e.weekly.hour)}:${H(e.weekly.minute)}`,daysOfWeek:[...e.weekly.daysOfWeek]}:{periodicity:"single"}}getCurrentHour(e){let t=H(e.getHours()),o=H(e.getMinutes());return`${t}:${o}`}getHourFirstExecution(e){return this.getCurrentHour(new Date(e))}removeInvalidKeys(e,t){let o=t||["periodicity","hour","minute","day","daysOfWeek","dayOfMonth","firstExecutionHour","frequency","rangeLimitHour","rangeLimitDay"];Object.keys(e).forEach(n=>{(o.includes(n)||n==="rangeExecutions"&&e.periodicity==="single")&&delete e[n]})}replaceHourFirstExecution(e,t){try{if(!e)return e;let o=e.split("-"),n=t.split(":");if(o.length<2||n.length<1)return e;let r=parseInt(o[0]),p=parseInt(o[1])-1,v=parseInt(o[2]),P=parseInt(n[0],10),L=parseInt(n[1],10),$=new Date(r,p,v,P,L);return $ instanceof Date&&!isNaN($.getTime())?Gi($):e}catch{return e}}returnValidExecutionParameter(e){let t=f({},e);for(let o in t)t.hasOwnProperty(o)&&t[o]===void 0&&delete t[o];return t}static \u0275fac=function(t){return new(t||i)(c(b))};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var io=(()=>{class i{poPageJobSchedulerService;constructor(e){this.poPageJobSchedulerService=e}getFilteredItems({filter:e,page:t,pageSize:o}){let n={page:t,pageSize:o,search:e};return this.poPageJobSchedulerService.getProcesses(n)}getObjectByValue(e){return this.poPageJobSchedulerService.getProcess(e)}static \u0275fac=function(t){return new(t||i)(c(qt))};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ot=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({providers:[qt,io],imports:[h,k,ce,gt,pt,ie,ue,T,se,re,X,_t,we]})}return i})(),Ht=function(i){return i.Basic="Basic",i.Bearer="Bearer",i}(Ht||{}),oo=(()=>{class i{http;constructor(e){this.http=e}onLogin(e,t,o){if(t===Ht.Bearer)return o.password=btoa(o.password),this.http.post(e,o);{let n=`(${o.login}:${o.password})`,r=new _({Authorization:`${t} `+btoa(n)});return delete o.login,delete o.password,this.http.post(e,o,{headers:r})}}static \u0275fac=function(t){return new(t||i)(c(b))};static \u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var jt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({providers:[oo],imports:[h,k,F,he,Z]})}return i})(),Wt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=u({type:i});static \u0275inj=d({imports:[Dt,he,Lt,xt,Ft,Nt,Re,Rt,Ot,jt,Dt,he,Lt,xt,Ft,Nt,Re,Rt,Ot,jt]})}return i})();var ro={production:!1,useHTTP:!1};function J(i){return i==null}function so(){return Math.floor(Math.random()*1e5*new Date().getMilliseconds())}var D=(()=>{class i{constructor(){}hasDialog(){return typeof dialog<"u"&&typeof dialog.jsToAdvpl=="function"}hasWebChannel(){return typeof twebchannel<"u"&&typeof twebchannel.jsToAdvpl=="function"}getWebChannel(){if(this.hasWebChannel())return twebchannel;if(this.hasDialog())return dialog}jsToAdvpl(e,t){let o=this.getWebChannel();return J(o)?!1:(o.jsToAdvpl(e,t),!0)}AdvplCloseApp(e=""){this.jsToAdvpl("close",e)}buildListener(e,t){let o=this.getWebChannel();o&&o.eventTarget&&o.eventTarget.addEventListener(e,t)}buildObservable(e,t){!t.receiveId&&t.sendInfo&&!t.sendInfo.content&&(t.receiveId=t.sendInfo.type+"-"+this.generateEventId());let o=new I(n=>{let r=this.getWebChannel();r[t.receiveId]={},r[t.receiveId].subscriber=n,t.autoDestruct?(r[t.receiveId].autoDestruct=this.buildAutoDestruct(t.receiveId,e),r.eventTarget.addEventListener(t.receiveId,r[t.receiveId].autoDestruct)):r.eventTarget.addEventListener(t.receiveId,e)});return t.sendInfo&&this.connectedJsToAdvpl(t.sendInfo.type,t.sendInfo.content?t.sendInfo.content:t.receiveId),o}buildAutoDestruct(e,t){return({protheusResponse:o,subscriber:n})=>{let r=this.getWebChannel();t({protheusResponse:o,subscriber:n}),r[e]&&(r.eventTarget.removeEventListener(e,r[e].autoDestruct),delete r[e])}}protheusConnected(){let e=this.getWebChannel();return!J(e)&&e.gotConnection}connectedJsToAdvpl(e,t,o=99,n=50){this.protheusConnected()?this.jsToAdvpl(e,t):o>0?(o--,setTimeout(()=>{this.connectedJsToAdvpl(e,t,o,n)},n)):console.log("jsToAdvpl type "+e+" not executed!")}generateEventId(){return so()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Jt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h]})}}return i})(),O=(()=>{class i{setSessionInfo(){this.setCompany(JSON.parse(sessionStorage.ProCompany)),this.setBranch(JSON.parse(sessionStorage.ProBranch)),this.setModule(sessionStorage.ProModule),this.setAppName(sessionStorage.appName),this.setSystemModule(sessionStorage.ProSystemModule),this.setDataBase(sessionStorage.ProDatabase),this.setRemoteType(parseInt(sessionStorage.RemoteType)),this.setSocketPort(parseInt(sessionStorage.SocketPort)),this.setAppConfig(JSON.parse(sessionStorage.ProAppConfig)),this.setIdiom(sessionStorage.ProIdiom),this.setRole(sessionStorage.ProRole),this.setToken(JSON.parse(sessionStorage.TOKEN)),this.setErpAppConfig(JSON.parse(sessionStorage.ERPAPPCONFIG)),this.setUser(sessionStorage.ProUser),this.setErpToken(JSON.parse(sessionStorage.ERPTOKEN)),this.setTheme(JSON.parse(localStorage.getItem("ProTheme")))}getSessionInfo(){return{proCompany:this.getCompany(),proBranch:this.getBranch(),proModule:this.getModule(),appName:this.getAppName(),proSystemModule:this.getSystemModule(),proDatabase:this.getDataBase(),remoteRype:this.getRemoteType(),socketPort:this.getSocketPort(),proAppConfig:this.getAppConfig(),proIdiom:this.getIdiom(),proRole:this.getRole(),token:this.getToken(),erpAppConfig:this.getErpAppConfig(),proUser:this.getUser(),erpToken:this.getErpToken()}}getCompany(){let e=sessionStorage.ProCompany,t;return e&&(t=JSON.parse(e)),this.proCompany??t}getBranch(){let e=sessionStorage.ProBranch,t;return e&&(t=JSON.parse(e)),this.proBranch??t}getModule(){return this.proModule??sessionStorage.ProModule}getAppName(){return this.appName??sessionStorage.appName}getSystemModule(){let e=sessionStorage.ProSystemModule,t;return e&&(t=JSON.parse(e)),this.proSystemModule??t}getDataBase(){return this.proDataBase??sessionStorage.ProDatabase}getRemoteType(){let e=sessionStorage.RemoteType,t;return e&&(t=parseInt(e)),this.remoteType??t}getSocketPort(){let e=sessionStorage.SocketPort,t;return e&&(t=parseInt(e)),this.socketPort??t}getAppConfig(){let e=sessionStorage.ProAppConfig,t;return e&&(t=JSON.parse(e)),this.proAppConfig??t}getIdiom(){return this.proIdiom??sessionStorage.ProIdiom}getRole(){let e=sessionStorage.ProRole,t;return e&&(t=JSON.parse(e)),this.proRole??t}getToken(){let e=sessionStorage.TOKEN,t;return e&&(t=JSON.parse(e)),this.token??t}getErpAppConfig(){let e=sessionStorage.ERPAPPCONFIG,t;return e&&(t=JSON.parse(e)),this.erpAppConfig??t}getUser(){let e=sessionStorage.ProUser,t;return e&&(t=JSON.parse(e)),this.proUser??t}getErpToken(){let e=sessionStorage.ERPTOKEN,t;return e&&(t=JSON.parse(e)),this.erpToken??t}getTheme(){let e=localStorage.getItem("ProTheme"),t;return e&&(t=JSON.parse(e)),this.theme??t}setCompany(e){this.proCompany=e}setBranch(e){this.proBranch=e}setModule(e){this.proModule=e}setAppName(e){this.appName=e}setSystemModule(e){e&&(this.proSystemModule=JSON.parse(e))}setDataBase(e){this.proDataBase=e}setRemoteType(e){this.remoteType=e}setSocketPort(e){this.socketPort=e}setAppConfig(e){this.proAppConfig=e}setIdiom(e){this.proIdiom=e}setRole(e){e&&(this.proRole=JSON.parse(e))}setToken(e){this.token=e}setErpAppConfig(e){this.erpAppConfig=e}setUser(e){e&&(this.proUser=JSON.parse(e))}setErpToken(e){this.erpToken=e}setTheme(e){this.theme=e}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ao="ProCompany",qe=(()=>{class i{constructor(e,t,o){this.http=e,this.advplService=t,this.sessionInfoService=o,this.url="/api/framework/environment/v1/companies",this.useHTTP=!0,this.EVENT_GET_LIST_ID="getCompaniesList",this.EVENT_SET_LIST_ID="setCompaniesList",this.EVENT_GET_ONE_ID="getCompanyInfo",this.EVENT_SET_ONE_ID="setCompanyInfo"}getListOfCompanies(e="",t=1,o=100){return this.useHTTP?this.getListOfCompaniesFromApi(e,t,100):this.getListOfCompaniesFromAdvpl(e,t,100)}getUserCompanies(e="",t=1,o=10){return this.getListOfCompaniesFromApi(e,t,o)}getListOfCompaniesFromApi(e,t,o){let n=new G().append("page",t.toString()).append("pageSize",o.toString());e!==""&&(n=n.append("CorporateName",e));let r=new _().append("Accept","application/json; charset=utf-8");return this.http.get(this.url,{headers:r,params:n})}getListOfCompaniesFromAdvpl(e,t,o){if(!this.advplService.protheusConnected())return this.advplNotPrepared();let n=JSON.stringify({CorporateName:e,page:t,pageSize:o}),r={sendInfo:{type:this.EVENT_GET_LIST_ID,content:n},autoDestruct:!0,receiveId:this.EVENT_SET_LIST_ID},p=({protheusResponse:v,subscriber:P})=>{if(v.length===0)P.error({status:400,description:`company ${e} could not be found`});else{let L=JSON.parse(v);P.next(L)}P.complete()};return this.advplService.buildObservable(p,r)}getCompany(e){return this.useHTTP?this.getCompanyFromApi(e):this.getCompanyFromAdvpl(e)}getCompanyFromApi(e){let t=new _().append("Accept","application/json; charset=utf-8");return this.http.get(`${this.url}/${e}`,{headers:t})}getCompanyFromAdvpl(e){return this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:t,subscriber:o})=>{if(t.length===0)o.error({status:400,description:`company ${e} could not be found`});else{let n=JSON.parse(t);o.next(n)}o.complete()},{sendInfo:{type:this.EVENT_GET_ONE_ID,content:e},autoDestruct:!0,receiveId:this.EVENT_SET_ONE_ID}):this.advplNotPrepared()}get company(){let e=this.sessionInfoService.getCompany();return e||{Code:"",CorporateName:"",InternalId:""}}set company(e){sessionStorage[ao]=JSON.stringify(e)}advplNotPrepared(){return new I(e=>{e.error({status:400,description:"advplService not prepared in ProCompanyService"}),e.complete()})}isChannelHTTP(){return this.useHTTP}setChannelAsHTTP(e){this.useHTTP=e}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),lo="ProBranch",vi=(()=>{class i{constructor(e,t,o,n){this.http=e,this.advplService=t,this.proCompanyService=o,this.sessionInfoService=n,this.url="/api/framework/environment/v1/branches",this.useHTTP=!0,this.EVENT_SET_LIST_ID="setBranchesList",this.EVENT_GET_LIST_ID="getBranchesList",this.EVENT_SET_ONE_ID="setBranchInfo",this.EVENT_GET_ONE_ID="getBranchInfo"}getListOfBranches(e="",t=1,o=100){return this.useHTTP?this.getListOfBranchesFromApi(e,t,100):this.getListOfBranchesFromAdvpl(e,t,100)}getUserBranches(e="",t=1,o=10){return this.getListOfBranchesFromApi(e,t,o,!1)}getListOfBranchesFromApi(e,t,o,n=!0){let r=new G().append("page",t.toString()).append("pageSize",o.toString()),p=this.proCompanyService.company;e!==""&&(r=r.append("Description",e)),n&&(r=r.append("EnterpriseGroup",p.Code));let v=new _().append("Accept","application/json; charset=utf-8");return this.http.get(this.url,{headers:v,params:r})}getListOfBranchesFromAdvpl(e,t,o){if(!this.advplService.protheusConnected())return this.advplNotPrepared();let n=this.proCompanyService.company,r=JSON.stringify({Description:e,EnterpriseGroup:n.Code,page:t,pageSize:o}),p={sendInfo:{type:this.EVENT_GET_LIST_ID,content:r},autoDestruct:!0,receiveId:this.EVENT_SET_LIST_ID},v=({protheusResponse:P,subscriber:L})=>{if(P.length===0)L.error({status:400,description:`branch ${e} could not be found`});else{let $=JSON.parse(P);L.next($)}L.complete()};return this.advplService.buildObservable(v,p)}getBranch(e,t=""){return this.useHTTP?this.getBranchFromApi(e,t):this.getBranchFromAdvpl(e,t)}getBranchFromApi(e,t){t===""&&(t=this.proCompanyService.company.Code);let o=new _().append("Accept","application/json; charset=utf-8");return this.http.get(`${this.url}/${t}|${e}`,{headers:o})}getBranchFromAdvpl(e,t){if(!this.advplService.protheusConnected())return this.advplNotPrepared();t===""&&(t=this.proCompanyService.company.Code);let o=JSON.stringify({branch:e,company:t}),n={sendInfo:{type:this.EVENT_GET_ONE_ID,content:o},autoDestruct:!0,receiveId:this.EVENT_SET_ONE_ID},r=({protheusResponse:p,subscriber:v})=>{let P=p.length>0,L=P?JSON.parse(p):{};if(P=P&&L&&L.success,!P)v.error({status:400,description:`branch ${e} could not be found`});else{let $=JSON.parse(L.payload);v.next($)}v.complete()};return this.advplService.buildObservable(r,n)}get branch(){let e=this.sessionInfoService.getBranch();return e||{Code:"",EnterpriseGroup:"",Description:""}}set branch(e){sessionStorage[lo]=JSON.stringify(e)}advplNotPrepared(){return new I(e=>{e.error({status:400,description:"advplService not prepared in ProBranchService"}),e.complete()})}isChannelHTTP(){return this.useHTTP}setChannelAsHTTP(e){this.useHTTP=e}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D),c(qe),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var $t=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,Y,T,oe]})}}return i})();var Qt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,Y,T,oe]})}}return i})();var Gt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,Y,T,oe]})}}return i})(),co="ProSystemModule",po=(()=>{class i{constructor(e,t,o){this.http=e,this.advplService=t,this.sessionInfoService=o,this.url="/api/framework/v1/systemModules",this.useHTTP=!0,this.EVENT_SET_LIST="setModulesList",this.EVENT_GET_LIST="getModulesList",this.EVENT_SET_ONE="setModuleInfo",this.EVENT_GET_ONE="getModuleInfo"}getListOfSystemModules(e="",t=1,o=10){return this.useHTTP?this.getListOfSystemModulesFromApi(e,t,100):this.getListOfSystemModulesFromAdvpl(e,t,100)}getListOfSystemModulesFromApi(e,t,o){let n=new G().append("page",t.toString()).append("pageSize",o.toString());e!==""&&(n=n.append("description",e));let r=new _().append("Accept","application/json; charset=utf-8");return this.http.get(this.url,{headers:r,params:n})}getListOfSystemModulesFromAdvpl(e,t,o){if(!this.advplService.protheusConnected())return this.advplNotPrepared();let n=JSON.stringify({description:e,page:t,pageSize:o});return this.advplService.buildObservable(({protheusResponse:r,subscriber:p})=>{if(r.length===0)p.error({status:400,description:`module ${e} could not be found`});else{let v=JSON.parse(r);p.next(v)}p.complete()},{sendInfo:{type:this.EVENT_GET_LIST,content:n},autoDestruct:!0,receiveId:this.EVENT_SET_LIST})}getSystemModule(e){return this.useHTTP?this.getSystemModuleFromAPI(e):this.getSystemModuleFromAdvpl(e)}getSystemModuleFromAPI(e){let t=new _().append("Accept","application/json; charset=utf-8");return this.http.get(`${this.url}/${e}`,{headers:t})}getSystemModuleFromAdvpl(e){return this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:t,subscriber:o})=>{if(t.length===0)o.error({status:400,description:`module ${e} could not be found`});else{let n=JSON.parse(t);o.next(n)}o.complete()},{sendInfo:{type:this.EVENT_GET_ONE,content:e},autoDestruct:!0,receiveId:this.EVENT_SET_ONE}):this.advplNotPrepared()}get systemModule(){let e=this.sessionInfoService.getSystemModule();return e||{id:"",name:"",description:""}}set systemModule(e){sessionStorage[co]=JSON.stringify(e)}advplNotPrepared(){return new I(e=>{e.error({status:400,description:"advplService not prepared in ProSystemModuleService"}),e.complete()})}isChannelHTTP(){return this.useHTTP}setChannelAsHTTP(e){this.useHTTP=e}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Kt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,Y,T,oe]})}}return i})(),Ve=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[Qt,$t,Gt,Kt,Qt,$t,Gt,Kt]})}}return i})();var Yt=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h]})}}return i})(),je="ProUser",uo="/api/framework/v1/users",He=(()=>{class i{constructor(e,t){this.http=e,this.advplService=t,this.useHTTP=!0,this.EVENT_GET_ID="getUserInfo",this.EVENT_SET_ID="setUserInfo",this.URL_PSWRET="/api/framework/v1/basicProtheusServices/pswret/"}get(e,t=!1){return this.useHTTP||t?this.getFromApi(e):this.getFromAdvpl(e)}getFromApi(e){let t=new _().append("X-Totvs-No-Error","true").append("Accept","application/json; charset=utf-8");return this.http.get(`${uo}/${e}`,{headers:t}).pipe(N(o=>(o.complete_name=o.userName,o)),ve(o=>{sessionStorage[je]=JSON.stringify(o)}))}getFromAdvpl(e){if(!this.advplService.protheusConnected())return this.advplNotPrepared();let t=this.advplService.generateEventId(),o={sendInfo:{type:`${this.EVENT_GET_ID}#id#${t}`,content:e},autoDestruct:!0,receiveId:`${this.EVENT_SET_ID}#id#${t}`},n=({protheusResponse:r,subscriber:p})=>{if(r.length===0)p.error({status:400,description:`user ${e} could not be found`});else{let v=JSON.parse(r);v.complete_name=v.userName,sessionStorage[je]=JSON.stringify(r),p.next(v)}p.complete()};return this.advplService.buildObservable(n,o)}removeFromStorage(){sessionStorage.removeItem(je)}advplNotPrepared(){return new I(e=>{e.error({status:400,description:"advplService not prepared in ProUserInfoService"}),e.complete()})}isChannelHTTP(){return this.useHTTP}setChannelAsHTTP(e){this.useHTTP=e}pswRet(){return this.http.get(this.URL_PSWRET)}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ho="/api/framework/mfa/hasSecret",mo="/api/framework/mfa/tok",go="/api/framework/mfa/TOTPURI",fo=(()=>{class i{constructor(e,t){this.http=e,this.advplService=t,this.isHTTP=!0,this.hasMFA=!1,this.isValidToken=!1,this.isSigaCfg=!1}setHasMFA(e){this.hasMFA=e}getHasMFA(){return this.hasMFA}setIsValidToken(e){this.isValidToken=e}getIsValidToken(){return this.isValidToken}setIsSigaCfg(e){this.isSigaCfg=e}getIsSigaCfg(){return this.isSigaCfg}userHasMfaSecurity(){return!this.isHTTP&&this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(this.validResponse(e,t)){let o=JSON.parse(e);t.next(o)}t.complete()},this.getJsToAdvplSend("hasSecret","","hasSecret")):this.http.get(ho)}getMfaQrCode(){return!this.isHTTP&&this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(this.validResponse(e,t)){let o=JSON.parse(e);t.next(o)}t.complete()},this.getJsToAdvplSend("mfaQrCode","","mfaQrCode")):this.http.get(go)}getMfaValid(e){if(!this.isHTTP&&this.advplService.protheusConnected())return this.advplService.buildObservable(({protheusResponse:t,subscriber:o})=>{if(this.validResponse(t,o)){let n=JSON.parse(t);o.next(n)}o.complete()},this.getJsToAdvplSend("mfaValidCode",e,"mfaValidCode"));{let t=new G().append("token",e);return this.http.get(mo,{params:t})}}isSIGACFG(){return!this.isHTTP||this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(this.validResponse(e,t)){let o=JSON.parse(e);t.next(o.isConfig)}t.complete()},this.getJsToAdvplSend("isConfig","","isConfig")):j(!1)}isChannelHTTP(){return this.isHTTP}setChannelAsHTTP(e){this.isHTTP=e}validResponse(e,t){let o=e.length!==0;return o||t.error({status:401}),o}getJsToAdvplSend(e,t,o,n){return{sendInfo:{type:e,content:t},autoDestruct:n??!0,receiveId:o}}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Xt="ERPTOKEN",Zt="/api/oauth2/v1/token",ee=(()=>{class i{constructor(e,t,o,n,r){this.http=e,this.proUserInfoService=t,this.advplService=o,this.sessionInfoService=n,this.proMfaService=r,this.proUserInfoService.setChannelAsHTTP(ro.useHTTP)}requestLoginDefaults(){return J(this.advplService.getWebChannel())?new I(e=>{e.next({username:"",username_when:!0,password:"",remember_user:!1,show_remember_user:!1}),e.complete()}):this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(e.length===0)t.next({username:"",username_when:!0,password:"",remember_user:!1,show_remember_user:!1});else{let o=JSON.parse(e);t.next(o)}t.complete()},{sendInfo:{type:"getLoginStart"},autoDestruct:!0})}requestToken(e){if(this.advplService.protheusConnected())return this.advplService.buildObservable(({protheusResponse:t,subscriber:o})=>{if(t.length===0)o.error({status:401});else{let n=JSON.parse(t);o.next(n)}o.complete()},{sendInfo:{type:"loginInside",content:btoa(JSON.stringify({usr:e.username,psw:e.password,remember:e.remember_user}))},autoDestruct:!0,receiveId:"setToken"});{let t=new _().append("X-Totvs-No-Error","true").set("grant_type","password").set("username",e.username).set("password",e.password);return this.http.post(Zt,{},{headers:t})}}refreshToken(e){let t=new G().set("grant_type","refresh_token").set("refresh_token",e);return this.http.post(Zt,{},{params:t})}login(e){let t=new We;return this.requestToken(e).subscribe({next:o=>{let n=this.getTokenPayload(o.access_token).userid;this.saveToken(o),this.saveUserInfo(n),t.next(o)},error:o=>{t.error(o)}}),t.asObservable()}passwordRecovery(e){this.advplService.jsToAdvpl("openPasswordRecovery",e)}saveToken(e){this.sessionInfoService.setErpToken(e),sessionStorage[Xt]=JSON.stringify(e)}saveUserInfo(e){this.proUserInfoService.get(e).subscribe(t=>{this._ProUserInfo=t})}isTokenValid(e=Date.now()){let t=Math.round(e/1e3);return this.getTokenPayload(this.token.access_token).exp-t>this.token.expires_in/10}updateToken(){return Ee(this,null,function*(){let e=yield this.refreshToken(this.token.refresh_token).toPromise();this.saveToken(e),this._token=e})}get userInfo(){return this._ProUserInfo}get token(){let e=this.sessionInfoService.getErpToken();return e&&(this._token=e),this._token}get isUserAuthenticate(){return!J(this.token)&&!J(this.token.access_token)}logout(){this.proMfaService.setIsValidToken(!1),this.sessionInfoService.setErpToken(void 0),sessionStorage.removeItem(Xt),this.proUserInfoService.removeFromStorage()}getTokenPayload(e=this.token.access_token){return JSON.parse(atob(e.split(".")[1]))}get userId(){return this.getTokenPayload().userid}showLoginMessage(){this.advplService.protheusConnected()&&this.advplService.jsToAdvpl("showLoginMessage","")}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(He),c(D),c(O),c(fo))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var s={"--color-brand-01-lightest":"#d7f0fe","--color-brand-01-lighter":"#9cd8fc","--color-brand-01-light":"#6bc5fa","--color-brand-01-base":"#045b8f","--color-brand-01-dark":"#013f65","--color-brand-01-darker":"#002944","--color-brand-01-darkest":"#00182b","--color-action-default":"#045b8f","--color-action-hover":"#013f65","--color-action-pressed":"#002944","--color-action-disabled":"#b2b2b2","--color-action-focus":"#00182b","--color-neutral-light-00":"#ffffff","--color-neutral-light-05":"#f2f2f2","--color-neutral-light-10":"#e5e5e5","--color-neutral-light-20":"#cccccc","--color-neutral-light-30":"#b2b2b2","--color-neutral-mid-40":"#999999","--color-neutral-mid-60":"#666666","--color-neutral-dark-70":"#4d4d4d","--color-neutral-dark-80":"#363636","--color-neutral-dark-90":"#1a1a1a","--color-neutral-dark-95":"#0d0d0d","--color-brand-02-base":"#045b8f","--color-brand-03-base":"#045b8f","--color-feedback-negative-lightest":"#f6e6e5","--color-feedback-negative-lighter":"#e3aeab","--color-feedback-negative-light":"#d58581","--color-feedback-negative-base":"#be3e37","--color-feedback-negative-dark":"#9b2d27","--color-feedback-negative-darker":"#72211d","--color-feedback-negative-darkerst":"#4a1512","--color-feedback-info-lightest":"#e3e9f7","--color-feedback-info-lighter":"#b0c1e8","--color-feedback-info-light":"#7996d7","--color-feedback-info-base":"#23489f","--color-feedback-info-dark":"#173782","--color-feedback-info-darker":"#0f2557","--color-feedback-info-darkerst":"#081536","--color-feedback-positive-lightest":"#def7ed","--color-feedback-positive-lighter":"#7ecead","--color-feedback-positive-light":"#41b483","--color-feedback-positive-base":"#107048","--color-feedback-positive-dark":"#0f5236","--color-feedback-positive-darker":"#083a25","--color-feedback-positive-darkerst":"#002415","--color-feedback-warning-lightest":"#fcf6e3","--color-feedback-warning-lighter":"#f7dd97","--color-feedback-warning-light":"#f1cd6a","--color-feedback-warning-base":"#efba2a","--color-feedback-warning-dark":"#d8a20e","--color-feedback-warning-darker":"#705200","--color-feedback-warning-darkerst":"#473400"},a={"--color-brand-01-lightest":"#051f31","--color-brand-01-lighter":"#004064","--color-brand-01-light":"#00659a","--color-brand-01-base":"#0079b8","--color-brand-01-dark":"#3dadfa","--color-brand-01-darker":"#afd3fa","--color-brand-01-darkest":"#e3eefb","--color-action-default":"#3dadfa","--color-action-hover":"#afd3fa","--color-action-pressed":"#e3eefb","--color-action-disabled":"#7c7c7c","--color-action-focus":"#e3eefb","--color-neutral-light-00":"#1c1c1c","--color-neutral-light-05":"#202020","--color-neutral-light-10":"#2b2b2b","--color-neutral-light-20":"#3b3b3b","--color-neutral-light-30":"#5a5a5a","--color-neutral-mid-40":"#7c7c7c","--color-neutral-mid-60":"#a1a1a1","--color-neutral-dark-70":"#c1c1c1","--color-neutral-dark-80":"#d9d9d9","--color-neutral-dark-90":"#eeeeee","--color-neutral-dark-95":"#fbfbfb","--color-brand-02-base":"#3dadfa","--color-brand-03-base":"#3dadfa","--color-feedback-negative-lightest":"#4a1512","--color-feedback-negative-lighter":"#72211d","--color-feedback-negative-light":"#9b2d27","--color-feedback-negative-base":"#be3e37","--color-feedback-negative-dark":"#d58581","--color-feedback-negative-darker":"#e3aeab","--color-feedback-negative-darkerst":"#f6e6e5","--color-feedback-info-lightest":"#081536","--color-feedback-info-lighter":"#0f2557","--color-feedback-info-light":"#173782","--color-feedback-info-base":"#23489f","--color-feedback-info-dark":"#7996d7","--color-feedback-info-darker":"#b0c1e8","--color-feedback-info-darkerst":"#e3e9f7","--color-feedback-positive-lightest":"#002415","--color-feedback-positive-lighter":"#083a25","--color-feedback-positive-light":"#0f5236","--color-feedback-positive-base":"#107048","--color-feedback-positive-dark":"#41b483","--color-feedback-positive-darker":"#7ecead","--color-feedback-positive-darkerst":"#def7ed","--color-feedback-warning-lightest":"#473400","--color-feedback-warning-lighter":"#705200","--color-feedback-warning-light":"#d8a20e","--color-feedback-warning-base":"#efba2a","--color-feedback-warning-dark":"#f1cd6a","--color-feedback-warning-darker":"#f7dd97","--color-feedback-warning-darkerst":"#fcf6e3"},l={"--color-brand-01-lightest":"#ffebee","--color-brand-01-lighter":"#ef9a9a","--color-brand-01-light":"#ef5350","--color-brand-01-base":"#c20c18","--color-brand-01-dark":"#a5131a","--color-brand-01-darker":"#5d0d11","--color-brand-01-darkest":"#400a08","--color-action-default":"#c20c18","--color-action-hover":"#a5131a","--color-action-pressed":"#5d0d11","--color-action-disabled":"#b2b2b2","--color-action-focus":"#400a08","--color-neutral-light-00":"#ffffff","--color-neutral-light-05":"#f2f2f2","--color-neutral-light-10":"#e5e5e5","--color-neutral-light-20":"#cccccc","--color-neutral-light-30":"#b2b2b2","--color-neutral-mid-40":"#999999","--color-neutral-mid-60":"#666666","--color-neutral-dark-70":"#4d4d4d","--color-neutral-dark-80":"#363636","--color-neutral-dark-90":"#1a1a1a","--color-neutral-dark-95":"#0d0d0d","--color-brand-02-base":"#c20c18","--color-brand-03-base":"#c20c18","--color-feedback-negative-lightest":"#f1e8fd","--color-feedback-negative-lighter":"#d691e1","--color-feedback-negative-light":"#ba6bcd","--color-feedback-negative-base":"#7b1fa2","--color-feedback-negative-dark":"#4a148c","--color-feedback-negative-darker":"#3e166f","--color-feedback-negative-darkerst":"#1e0a36","--color-feedback-info-lightest":"#e3e9f7","--color-feedback-info-lighter":"#b0c1e8","--color-feedback-info-light":"#7996d7","--color-feedback-info-base":"#23489f","--color-feedback-info-dark":"#173782","--color-feedback-info-darker":"#0f2557","--color-feedback-info-darkerst":"#081536","--color-feedback-positive-lightest":"#def7ed","--color-feedback-positive-lighter":"#7ecead","--color-feedback-positive-light":"#41b483","--color-feedback-positive-base":"#107048","--color-feedback-positive-dark":"#0f5236","--color-feedback-positive-darker":"#083a25","--color-feedback-positive-darkerst":"#002415","--color-feedback-warning-lightest":"#fcf6e3","--color-feedback-warning-lighter":"#f7dd97","--color-feedback-warning-light":"#f1cd6a","--color-feedback-warning-base":"#efba2a","--color-feedback-warning-dark":"#d8a20e","--color-feedback-warning-darker":"#705200","--color-feedback-warning-darkerst":"#473400"},W=function(i){return i.proThemeTotvsClassic="proThemeTotvsClassic",i.proThemeTotvsSunset="proThemeTotvsSunset",i}(W||{}),me=class{constructor(){this._name="",this._type=this.getTypeStructure(),this._active=ne.light}get name(){return this._name}set name(m){this._name=m}get active(){return this._active}set active(m){this._active=m}get type(){return this._type}set type(m){this._type=m}availableThemes(){return Object.values(W)}setTheme(m){let e;switch(m){case W.proThemeTotvsClassic:e=new ze;break;case W.proThemeTotvsSunset:e=new Be;break}this.name=e.name,this.active=e.active,this.type=e.type}getTypeStructure(){return{light:{color:{brand:{"01":{lightest:"",lighter:"",light:"",base:"",dark:"",darker:"",darkest:""},"02":{base:""},"03":{base:""}},action:f({},lt),feedback:C(f({},ae),{info:C(f({},ae.info),{base:""})}),neutral:f({},ct)}},dark:{color:{brand:{"01":{lightest:"",lighter:"",light:"",base:"",dark:"",darker:"",darkest:""},"02":{base:""},"03":{base:""}},action:{default:"",hover:"",pressed:"",disabled:"",focus:""},feedback:C(f({},ae),{info:C(f({},ae.info),{base:""})}),neutral:{light:{"00":"","05":"",10:"",20:"",30:""},mid:{40:"",60:""},dark:{70:"",80:"",90:"",95:""}}}}}}},ze=class extends me{constructor(){super(),this.name="proThemeTotvsClassic",this.type=this.getProThemeTotvsClassic()}getProThemeTotvsClassic(){return{light:this.getProThemeTotvsClassicTokensDark(),dark:this.getProThemeTotvsClassicTokensLight()}}getProThemeTotvsClassicTokensLight(){return{color:{brand:{"01":{lightest:a["--color-brand-01-lightest"],lighter:a["--color-brand-01-lighter"],light:a["--color-brand-01-light"],base:a["--color-brand-01-base"],dark:a["--color-brand-01-dark"],darker:a["--color-brand-01-darker"],darkest:a["--color-brand-01-darkest"]},"02":{base:a["--color-brand-01-dark"]},"03":{base:a["--color-brand-01-dark"]}},action:{default:a["--color-action-default"],hover:a["--color-action-hover"],pressed:a["--color-action-pressed"],disabled:a["--color-action-disabled"],focus:a["--color-action-focus"]},neutral:{light:{10:a["--color-neutral-light-10"],20:a["--color-neutral-light-20"],30:a["--color-neutral-light-30"],"00":a["--color-neutral-light-00"],"05":a["--color-neutral-light-05"]},mid:{40:a["--color-neutral-mid-40"],60:a["--color-neutral-mid-60"]},dark:{70:a["--color-neutral-dark-70"],80:a["--color-neutral-dark-80"],90:a["--color-neutral-dark-90"],95:a["--color-neutral-dark-95"]}},feedback:{info:{base:a["--color-feedback-info-base"],lightest:a["--color-feedback-info-lightest"],lighter:a["--color-brand-info-lighter"],light:a["--color-feedback-info-light"],dark:a["--color-feedback-info-dark"],darker:a["--color-feedback-info-darker"],darkest:a["--color-feedback-info-darkerst"]},negative:{base:a["--color-feedback-negative-base"],lightest:a["--color-feedback-negative-lightest"],lighter:a["--color-brand-negative-lighter"],light:a["--color-feedback-negative-light"],dark:a["--color-feedback-negative-dark"],darker:a["--color-feedback-negative-darker"],darkest:a["--color-feedback-negative-darkerst"]},positive:{base:a["--color-feedback-positive-base"],lightest:a["--color-feedback-positive-lightest"],lighter:a["--color-brand-positive-lighter"],light:a["--color-feedback-positive-light"],dark:a["--color-feedback-positive-dark"],darker:a["--color-feedback-positive-darker"],darkest:a["--color-feedback-positive-darkerst"]},warning:{base:a["--color-feedback-warning-base"],lightest:a["--color-feedback-warning-lightest"],lighter:a["--color-brand-warning-lighter"],light:a["--color-feedback-warning-light"],dark:a["--color-feedback-warning-dark"],darker:a["--color-feedback-warning-darker"],darkest:a["--color-feedback-warning-darkerst"]}}},onRoot:C(f({},xe.onRoot),{"--color-toolbar-color-default":a["--color-brand-01-dark"],"--color-widget-color-action":a["--color-brand-01-dark"],"--color-neutral":a["--color-neutral-dark-70"],"--color-secondary":a["--color-action-default"],"--color-secondary-light-20":a["--color-brand-01-lighter"],"--color-secondary-light-40":a["--color-brand-01-light"],"--color-secondary-dark-20":a["--color-brand-01-dark"],"--color-secondary-dark-40":a["--color-brand-01-darker"],"--color-secondary-dark-80":a["--color-brand-01-darkest"],"--color-primary":a["--color-brand-02-base"],"--color-primary-light-80":"color-mix(in srgb, "+a["--color-brand-02-base"]+" 80%, black)","--color-primary-light-95":"color-mix(in srgb, "+a["--color-brand-02-base"]+" 95%, black)","--color-primary-alpha-50":"color-mix(in srgb, "+a["--color-brand-02-base"]+" 50%, white)","--color-primary-dark-20":"color-mix(in srgb, "+a["--color-brand-02-base"]+" 20%, white)","--color-primary-dark-40":"color-mix(in srgb, "+a["--color-brand-02-base"]+" 40%, white)","--color-secondary-dark-60-alpha-70":"color-mix(in srgb, "+a["--color-neutral-mid-60"]+" 70%, white)","--color-tertiary-light-90":"color-mix(in srgb, "+a["--color-brand-03-base"]+" 90%, black)","--color-tertiary-dark-5":"color-mix(in srgb, "+a["--color-brand-03-base"]+" 5%, white)","--color-calendar-background-color-box-background-range":a["--color-brand-01-lightest"],"--font-family-theme":"NunitoSans, sans-serif","--font-family-theme-bold":"NunitoSans-Bold, sans-serif","--font-family-theme-extra-light":"NunitoSans-ExtraLight, sans-serif","--font-family-heading":"NunitoSans, sans-serif","--font-family-code":"Monospace","--font-family":"NunitoSans, sans-serif"}),perComponent:C(f({},xe.perComponent),{"po-popup po-item-list":{"--color":a["--color-brand-01-dark"]}})}}getProThemeTotvsClassicTokensDark(){return{color:{brand:{"01":{lightest:s["--color-brand-01-lightest"],lighter:s["--color-brand-01-lighter"],light:s["--color-brand-01-light"],base:s["--color-brand-01-base"],dark:s["--color-brand-01-dark"],darker:s["--color-brand-01-darker"],darkest:s["--color-brand-01-darkest"]},"02":{base:s["--color-brand-02-base"]},"03":{base:s["--color-brand-03-base"]}},action:{default:s["--color-action-default"],hover:s["--color-action-hover"],pressed:s["--color-action-pressed"],disabled:s["--color-action-disabled"],focus:s["--color-action-focus"]},neutral:{light:{10:s["--color-neutral-light-10"],20:s["--color-neutral-light-20"],30:s["--color-neutral-light-30"],"00":s["--color-neutral-light-00"],"05":s["--color-neutral-light-05"]},mid:{40:s["--color-neutral-mid-40"],60:s["--color-neutral-mid-60"]},dark:{70:s["--color-neutral-dark-70"],80:s["--color-neutral-dark-80"],90:s["--color-neutral-dark-90"],95:s["--color-neutral-dark-95"]}},feedback:{info:{base:s["--color-feedback-info-base"],lightest:s["--color-feedback-info-lightest"],lighter:s["--color-brand-info-lighter"],light:s["--color-feedback-info-light"],dark:s["--color-feedback-info-dark"],darker:s["--color-feedback-info-darker"],darkest:s["--color-feedback-info-darkerst"]},negative:{base:s["--color-feedback-negative-base"],lightest:s["--color-feedback-negative-lightest"],lighter:s["--color-brand-negative-lighter"],light:s["--color-feedback-negative-light"],dark:s["--color-feedback-negative-dark"],darker:s["--color-feedback-negative-darker"],darkest:s["--color-feedback-negative-darkerst"]},positive:{base:s["--color-feedback-positive-base"],lightest:s["--color-feedback-positive-lightest"],lighter:s["--color-brand-positive-lighter"],light:s["--color-feedback-positive-light"],dark:s["--color-feedback-positive-dark"],darker:s["--color-feedback-positive-darker"],darkest:s["--color-feedback-positive-darkerst"]},warning:{base:s["--color-feedback-warning-base"],lightest:s["--color-feedback-warning-lightest"],lighter:s["--color-brand-warning-lighter"],light:s["--color-feedback-warning-light"],dark:s["--color-feedback-warning-dark"],darker:s["--color-feedback-warning-darker"],darkest:s["--color-feedback-warning-darkerst"]}}},onRoot:C(f({},le.onRoot),{"--color-toolbar-color-default":s["--color-brand-02-base"],"--color-widget-color-action":s["--color-brand-02-base"],"--color-neutral":s["--color-neutral-dark-70"],"--color-secondary":s["--color-brand-01-base"],"--color-secondary-light-20":s["--color-brand-01-lighter"],"--color-secondary-light-40":s["--color-brand-01-light"],"--color-secondary-dark-20":s["--color-brand-01-dark"],"--color-secondary-dark-40":s["--color-brand-01-darker"],"--color-secondary-dark-80":s["--color-brand-01-darkest"],"--color-primary":s["--color-brand-02-base"],"--color-primary-light-80":"color-mix(in srgb, "+s["--color-brand-02-base"]+" 80%, white)","--color-primary-light-95":"color-mix(in srgb, "+s["--color-brand-02-base"]+" 95%, white)","--color-primary-alpha-50":"color-mix(in srgb, "+s["--color-brand-02-base"]+" 50%, black)","--color-primary-dark-20":"color-mix(in srgb, "+s["--color-brand-02-base"]+" 20%, black)","--color-primary-dark-40":"color-mix(in srgb, "+s["--color-brand-02-base"]+" 40%, black)","--color-secondary-dark-60-alpha-70":"color-mix(in srgb, "+s["--color-neutral-mid-60"]+" 70%, black)","--color-tertiary-light-90":"color-mix(in srgb, "+s["--color-brand-03-base"]+" 90%, white)","--color-tertiary-dark-5":"color-mix(in srgb, "+s["--color-brand-03-base"]+" 5%, black)","--color-calendar-background-color-box-background-range":s["--color-brand-01-lightest"],"--font-family-theme":"NunitoSans, sans-serif","--font-family-theme-bold":"NunitoSans-Bold, sans-serif","--font-family-theme-extra-light":"NunitoSans-ExtraLight, sans-serif","--font-family-heading":"NunitoSans, sans-serif","--font-family-code":"Monospace","--font-family":"NunitoSans, sans-serif"}),perComponent:C(f({},le.perComponent),{"po-popup po-item-list":{"--color":s["--color-brand-02-base"]}})}}},Be=class extends me{constructor(){super(),this.name="proThemeTotvsSunset",this.type=this.getProThemeTotvsSunset()}getProThemeTotvsSunset(){return{light:this.getProThemeTotvsSunsetTokensLight()}}getProThemeTotvsSunsetTokensLight(){return{color:{brand:{"01":{lightest:l["--color-brand-01-lightest"],lighter:l["--color-brand-01-lighter"],light:l["--color-brand-01-light"],base:l["--color-brand-01-base"],dark:l["--color-brand-01-dark"],darker:l["--color-brand-01-darker"],darkest:l["--color-brand-01-darkest"]},"02":{base:l["--color-brand-02-base"]},"03":{base:l["--color-brand-03-base"]}},action:{default:l["--color-action-default"],hover:l["--color-action-hover"],pressed:l["--color-action-pressed"],disabled:l["--color-action-disabled"],focus:l["--color-action-focus"]},neutral:{light:{10:l["--color-neutral-light-10"],20:l["--color-neutral-light-20"],30:l["--color-neutral-light-30"],"00":l["--color-neutral-light-00"],"05":l["--color-neutral-light-05"]},mid:{40:l["--color-neutral-mid-40"],60:l["--color-neutral-mid-60"]},dark:{70:l["--color-neutral-dark-70"],80:l["--color-neutral-dark-80"],90:l["--color-neutral-dark-90"],95:l["--color-neutral-dark-95"]}},feedback:{info:{base:l["--color-feedback-info-base"],lightest:l["--color-feedback-info-lightest"],lighter:l["--color-brand-info-lighter"],light:l["--color-feedback-info-light"],dark:l["--color-feedback-info-dark"],darker:l["--color-feedback-info-darker"],darkest:l["--color-feedback-info-darkerst"]},negative:{base:l["--color-feedback-negative-base"],lightest:l["--color-feedback-negative-lightest"],lighter:l["--color-brand-negative-lighter"],light:l["--color-feedback-negative-light"],dark:l["--color-feedback-negative-dark"],darker:l["--color-feedback-negative-darker"],darkest:l["--color-feedback-negative-darkerst"]},positive:{base:l["--color-feedback-positive-base"],lightest:l["--color-feedback-positive-lightest"],lighter:l["--color-brand-positive-lighter"],light:l["--color-feedback-positive-light"],dark:l["--color-feedback-positive-dark"],darker:l["--color-feedback-positive-darker"],darkest:l["--color-feedback-positive-darkerst"]},warning:{base:l["--color-feedback-warning-base"],lightest:l["--color-feedback-warning-lightest"],lighter:l["--color-brand-warning-lighter"],light:l["--color-feedback-warning-light"],dark:l["--color-feedback-warning-dark"],darker:l["--color-feedback-warning-darker"],darkest:l["--color-feedback-warning-darkerst"]}}},onRoot:C(f({},le.onRoot),{"--color-toolbar-color-default":l["--color-brand-02-base"],"--color-widget-color-action":l["--color-brand-02-base"],"--color-neutral":l["--color-neutral-dark-70"],"--color-secondary":l["--color-brand-01-base"],"--color-secondary-light-20":l["--color-brand-01-lighter"],"--color-secondary-light-40":l["--color-brand-01-light"],"--color-secondary-dark-20":l["--color-brand-01-dark"],"--color-secondary-dark-40":l["--color-brand-01-darker"],"--color-secondary-dark-80":l["--color-brand-01-darkest"],"--color-primary":l["--color-brand-02-base"],"--color-primary-light-80":"color-mix(in srgb, "+l["--color-brand-02-base"]+" 80%, white)","--color-primary-light-95":"color-mix(in srgb, "+l["--color-brand-02-base"]+" 95%, white)","--color-primary-alpha-50":"color-mix(in srgb, "+l["--color-brand-02-base"]+" 50%, black)","--color-primary-dark-20":"color-mix(in srgb, "+l["--color-brand-02-base"]+" 20%, black)","--color-primary-dark-40":"color-mix(in srgb, "+l["--color-brand-02-base"]+" 40%, black)","--color-secondary-dark-60-alpha-70":"color-mix(in srgb, "+l["--color-neutral-mid-60"]+" 70%, black)","--color-tertiary-light-90":"color-mix(in srgb, "+l["--color-brand-03-base"]+" 90%, white)","--color-tertiary-dark-5":"color-mix(in srgb, "+l["--color-brand-03-base"]+" 5%, black)","--color-calendar-background-color-box-background-range":l["--color-brand-01-lightest"],"--font-family-theme":"NunitoSans, sans-serif","--font-family-theme-bold":"NunitoSans-Bold, sans-serif","--font-family-theme-extra-light":"NunitoSans-ExtraLight, sans-serif","--font-family-heading":"NunitoSans, sans-serif","--font-family-code":"Monospace","--font-family":"NunitoSans, sans-serif"}),perComponent:C(f({},le.perComponent),{"po-popup po-item-list":{"--color":l["--color-brand-02-base"]}})}}},vo=(()=>{class i{constructor(e,t){this.http=e,this.poI18nService=t,this.URL_PROFILE="/api/framework/v1/profileService/",this.programName="",this.task="",this.type="",this.isReady=!1;let o=this.poI18nService.getShortLanguage();t.getLiterals({language:o,context:"general"}).subscribe(n=>{this.literals=n})}setProfile(e,t,o){this.programName=e,this.task=t,this.type=o,this.isReady=!0}create(e){let t=this.getRequisitionBody(e);return this.isReady?this.http.post(this.URL_PROFILE,t):this.profileNotReady()}read(e="",t="json"){if(this.isReady){let o="application/json";t!="json"&&(t="text",o="text/plain");let n=new G().set("defaultValue",e),r=new _().set("Accept",o);return this.http.get(this.getUrlApi(),{responseType:t,params:n,headers:r})}else return this.profileNotReady()}update(e){let t=this.getRequisitionBody(e);return this.isReady?this.http.put(this.getUrlApi(),t):this.profileNotReady()}delete(){return this.isReady?this.http.delete(this.getUrlApi()):this.profileNotReady()}deleteThenCreate(e){return this.isReady?this.http.delete(this.getUrlApi()).pipe(te(()=>j(this.http.post(this.URL_PROFILE,this.getRequisitionBody(e)))),fe(()=>this.http.post(this.URL_PROFILE,this.getRequisitionBody(e)))):this.profileNotReady()}profileNotReady(){return new I(e=>{e.error({status:400,message:this.literals.str0001}),e.complete()})}getUrlApi(){return`${this.URL_PROFILE}${this.programName}/${this.task}/${this.type}`}getRequisitionBody(e){return{programName:this.programName,task:this.task,type:this.type,value:e}}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(ut))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),yo={str0001:"Protheus Line",str0002:"User or password not valid.",str0003:"Unable to connect with server.",str0004:"A problem occurred in Login attempt",str0005:"Enter your user",str0006:"Ex. sp01\\name.lastname",str0007:"Enter your password",str0008:"This is an example with domain//user; however, depending on configuration, the user name may have another format.",str0009:"Associate Protheus user with Operational System user",str0010:"Support"},bo={str0001:"L\xEDnea Protheus",str0002:"Usuario o contrase\xF1a no v\xE1lida.",str0003:"No fue posible establecer conexi\xF3n con el servidor.",str0004:"Ocurri\xF3 un problema al intentar el Login",str0005:"Incluya su usuario",str0006:"Ej. sp01\\nombre.apellido",str0007:"Incluya su contrase\xF1a",str0008:"Este es un ejemplo con dominio\\usuario, sin embargo, dependiendo de la configuraci\xF3n, el nombre del usuario puede tener otro formato.",str0009:"Vincule usuario del Protheus al usuario del sistema operativo",str0010:"Soporte"},So={str0001:"Linha Protheus",str0002:"Usu\xE1rio ou senha inv\xE1lida.",str0003:"N\xE3o foi poss\xEDvel estabelecer conex\xE3o com o servidor.",str0004:"Ocorreu um problema na tentativa de Login",str0005:"Insira seu usu\xE1rio",str0006:"Ex. sp01\\nome.sobrenome",str0007:"Insira sua senha",str0008:"Este \xE9 um exemplo com dominio\\usuario, por\xE9m dependendo da configura\xE7\xE3o, o nome de usu\xE1rio pode ter outro formato.",str0009:"Associar usu\xE1rio do Protheus com usu\xE1rio do Sistema Operacional",str0010:"Suporte"},Po={str0001:"\u041B\u0438\u043D\u0438\u044F #_PRODUCT_#",str0002:"\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u0438\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C \u043D\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u044B.",str0003:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0438\u0442\u044C\u0441\u044F \u043A \u0441\u0435\u0440\u0432\u0435\u0440\u0443.",str0004:"\u041F\u0440\u0438 \u043F\u043E\u043F\u044B\u0442\u043A\u0435 \u0432\u0445\u043E\u0434\u0430 \u0432 \u0441\u0438\u0441\u0442\u0435\u043C\u0443 \u0432\u043E\u0437\u043D\u0438\u043A\u043B\u0430 \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u0430",str0005:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F",str0006:"\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, sp01\u0438\u043C\u044F.\u0444\u0430\u043C\u0438\u043B\u0438\u044F",str0007:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C",str0008:"\u042D\u0442\u043E \u043F\u0440\u0438\u043C\u0435\u0440 \u0441 \u0434\u043E\u043C\u0435\u043D\u043E\u043C//\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C; \u043E\u0434\u043D\u0430\u043A\u043E, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u043E\u0442 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0438\u043C\u044F \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F \u043C\u043E\u0436\u0435\u0442 \u0438\u043C\u0435\u0442\u044C \u0434\u0440\u0443\u0433\u043E\u0439 \u0444\u043E\u0440\u043C\u0430\u0442.",str0009:"\u0421\u0432\u044F\u0436\u0438\u0442\u0435 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F Proteus \u0441 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u0435\u043C \u043E\u043F\u0435\u0440\u0430\u0446\u0438\u043E\u043D\u043D\u043E\u0439 \u0441\u0438\u0441\u0442\u0435\u043C\u044B",str0010:"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430"},_o={str0001:"Checking MFA",str0002:"To continue, enter the code generated by the authentication application.",str0003:"If you lose your device, contact the system administrator.",str0004:"CODE",str0005:"1. Scan the QR Code below in the MFA application of your choice:",str0006:'2. Enter below the MFA token generated in the application and click "Register"',str0007:"Register",str0008:"MFA Token not valid. Enter it again or contact the System Administrator.",str0009:"MFA Token successfully validated",str0010:"MFA Token successfully registered.",str0011:"Enter",str0012:"Back"},Co={str0001:"Verificando MFA",str0002:"Para continuar es necesario incluir el c\xF3digo generado por la aplicaci\xF3n de autenticaci\xF3n.",str0003:"Si perdiera su dispositivo, entre en contacto con el administrador del sistema.",str0004:"C\xD3DIGO",str0005:"1. Escanear el siguiente QR Code en la aplicaci\xF3n MFA de su preferencia:",str0006:'2. Digite a continuaci\xF3n el token MFA generado en la aplicaci\xF3n y haga clic en "Registrar"',str0007:"Registrar",str0008:"Token MFA no v\xE1lido, digite nuevamente o entre en contacto con el Administrador del Sistema.",str0009:"Token MFA validado con \xE9xito",str0010:"Token MFA registrado con \xE9xito.",str0011:"Entrar",str0012:"Volver"},wo={str0001:"Verificando MFA",str0002:"Para continuar \xE9 necess\xE1rio inserir o c\xF3digo gerado pelo aplicativo de autentica\xE7\xE3o.",str0003:"Em caso de perda do dispositivo, entrar em contato com o administrador do sistema.",str0004:"C\xD3DIGO",str0005:"1. Escanear o QR Code abaixo no aplicativo MFA de sua prefer\xEAncia:",str0006:'2. Digite abaixo o token MFA gerado no aplicativo e clique em "Registrar"',str0007:"Registrar",str0008:"Token MFA inv\xE1lido, digite novamente ou entre em contato com o Administrador do Sistema.",str0009:"Token MFA validado com sucesso.",str0010:"Token MFA registrado com sucesso.",str0011:"Entrar",str0012:"Voltar"},ko={str0001:"\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 MFA",str0002:"\u0414\u043B\u044F \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0435\u043D\u0438\u044F \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043A\u043E\u0434, \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435\u043C \u0434\u043B\u044F \u0430\u0443\u0442\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0438",str0003:"\u0412 \u0441\u043B\u0443\u0447\u0430\u0435 \u043F\u043E\u0442\u0435\u0440\u0438 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0441\u0438\u0441\u0442\u0435\u043C\u043D\u043E\u043C\u0443 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443.",str0004:"\u041A\u043E\u0434",str0005:"1. \u041E\u0442\u0441\u043A\u0430\u043D\u0438\u0440\u0443\u0439\u0442\u0435 \u043F\u0440\u0438\u0432\u0435\u0434\u0435\u043D\u043D\u044B\u0439 \u043D\u0438\u0436\u0435 QR-\u043A\u043E\u0434 \u0432 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u043C \u0432\u0430\u043C\u0438 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 MFA:",str0006:"2. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0433\u0435\u043D\u0435\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043D\u044B\u0439 \u0432 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0438 \u0442\u043E\u043A\u0435\u043D MFA \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 \xAB\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F\xBB",str0007:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F",str0008:"\u0422\u043E\u043A\u0435\u043D MFA \u043D\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u0435\u043D. \u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0435\u0433\u043E \u0435\u0449\u0435 \u0440\u0430\u0437 \u0438\u043B\u0438 \u043E\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044C \u043A \u0441\u0438\u0441\u0442\u0435\u043C\u043D\u043E\u043C\u0443 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u0443",str0009:"\u0422\u043E\u043A\u0435\u043D MFA \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D",str0010:"\u0422\u043E\u043A\u0435\u043D MFA \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D",str0011:"\u0412\u043E\u0439\u0442\u0438",str0012:"\u041D\u0430\u0437\u0430\u0434"},To={str0001:"Protheus Line",str0002:"Choose a system base date.",str0003:"After enabling it, you can restore this option on the system menu (Miscellaneous/SingleSignOn Users).",str0004:"Support",str0005:"Use the information above in all sessions.",str0006:"Loading...",str0007:"Enter",str0008:"Back",str0009:"Welcome, {0}.",str0010:"Group",str0011:"Select Group of Companies.",str0012:"Branch",str0013:"Select Branch.",str0014:"Environment",str0015:"Select system module.",str0016:"Work role",str0017:"Select a work role.",str0018:"Base Date",str0019:"Form not valid",str0020:"Code",str0021:"Description",str0022:"Name",str0023:"Start with last session information.",str0024:"Unable to prepare printer. ",str0025:"Trade name",str0026:"EIN",str0027:"Company",str0028:"Unit",str0029:"Enable dark mode",str0030:"Disable dark mode"},Io={str0001:"L\xEDnea Protheus",str0002:"Seleccione la fecha base del sistema.",str0003:"Despu\xE9s de habilitar, usted puede restaurar esta opci\xF3n en el men\xFA del sistema (Miscel\xE1nea/Usuarios SingleSignOn).",str0004:"Soporte",str0005:"Utilizar las informaciones anteriores en todas las sesiones.",str0006:"Cargando....",str0007:"Entrar",str0008:"Volver",str0009:"Bienvenida, {0}.",str0010:"Grupo",str0011:"Seleccione el Grupo de empresas.",str0012:"Sucursal",str0013:"Seleccione la sucursal.",str0014:"Entorno",str0015:"Seleccione el m\xF3dulo del sistema.",str0016:"Papel de trabajo",str0017:"Seleccione un Papel de trabajo.",str0018:"Fecha base",str0019:"Formulario no v\xE1lido",str0020:"C\xF3digo",str0021:"Descripci\xF3n",str0022:"Nombre",str0023:"Iniciar con la informaci\xF3n de la \xFAltima sesi\xF3n.",str0024:"No se pudo enviar la requisici\xF3n. Por favor, intente nuevamente.",str0025:"Nombre comercial",str0026:"RCPJ",str0027:"Empresa",str0028:"Unidad",str0029:"Activar modo escuro",str0030:"Desactivar modo escuro"},Ao={str0001:"Linha Protheus",str0002:"Escolha a data base do sistema.",str0003:"Ap\xF3s habilitado, voc\xEA pode restaurar essa op\xE7\xE3o no menu do sistema(Miscelanea/Usu\xE1rios SingleSignOn).",str0004:"Suporte",str0005:"Usar as informa\xE7\xF5es acima em todas as sess\xF5es.",str0006:"Carregando...",str0007:"Entrar",str0008:"Voltar",str0009:"Boas-vindas, {0}.",str0010:"Grupo",str0011:"Selecione o Grupo de Empresas.",str0012:"Filial",str0013:"Selecione a Filial.",str0014:"Ambiente",str0015:"Selecione o m\xF3dulo do sistema.",str0016:"Papel de trabalho",str0017:"Selecione um Papel de trabalho.",str0018:"Data base",str0019:"Formul\xE1rio inv\xE1lido",str0020:"C\xF3digo",str0021:"Descri\xE7\xE3o",str0022:"Nome",str0023:"Iniciar com as informa\xE7\xF5es da \xFAltima sess\xE3o.",str0024:"N\xE3o foi poss\xEDvel enviar a requisi\xE7\xE3o. Por favor, tente novamente.",str0025:"Nome comercial",str0026:"CNPJ",str0027:"Empresa",str0028:"Unidade",str0029:"Ativar modo escuro",str0030:"Desativar modo escuro"},Mo={str0001:"\u041B\u0438\u043D\u0438\u044F Protheus",str0002:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0430\u0437\u043E\u0432\u0443\u044E \u0434\u0430\u0442\u0443 \u0441\u0438\u0441\u0442\u0435\u043C\u044B.",str0003:"After enabling it, you can restore this option on the system menu (Miscellaneous/SingleSignOn Users).",str0004:"\u041F\u043E\u0434\u0434\u0435\u0440\u0436\u043A\u0430",str0005:"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u043F\u0440\u0438\u0432\u0435\u0434\u0435\u043D\u043D\u0443\u044E \u0432\u044B\u0448\u0435 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044E \u0432\u043E \u0432\u0441\u0435\u0445 \u0441\u0435\u0430\u043D\u0441\u0430\u0445.",str0006:"\u0417\u0430\u0433\u0440\u0443\u0437\u043A\u0430...",str0007:"\u0412\u0432\u043E\u0434",str0008:"\u041D\u0430\u0437\u0430\u0434",str0009:"\u0414\u043E\u0431\u0440\u043E \u043F\u043E\u0436\u0430\u043B\u043E\u0432\u0430\u0442\u044C, {0}.",str0010:"\u0413\u0440\u0443\u043F\u043F\u0430",str0011:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0413\u0440\u0443\u043F\u043F\u0443 \u043A\u043E\u043C\u043F\u0430\u043D\u0438\u0439.",str0012:"\u0424\u0438\u043B\u0438\u0430\u043B",str0013:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0424\u0438\u043B\u0438\u0430\u043B.",str0014:"\u0421\u0440\u0435\u0434\u0430",str0015:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0438\u0441\u0442\u0435\u043C\u043D\u044B\u0439 \u043C\u043E\u0434\u0443\u043B\u044C.",str0016:"\u0420\u0430\u0431\u043E\u0447\u0430\u044F \u0440\u043E\u043B\u044C",str0017:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0431\u043E\u0447\u0443\u044E \u0440\u043E\u043B\u044C.",str0018:"\u0411\u0430\u0437\u043E\u0432\u0430\u044F \u0434\u0430\u0442\u0430",str0019:"\u0424\u043E\u0440\u043C\u0430 \u043D\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u0430",str0020:"\u041A\u043E\u0434",str0021:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",str0022:"\u0418\u043C\u044F",str0023:"\u041D\u0430\u0447\u043D\u0438\u0442\u0435 \u0441 \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u0438 \u043E \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u043C \u0441\u0435\u0430\u043D\u0441\u0435.",str0024:"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u0438\u0442\u044C \u043F\u0440\u0438\u043D\u0442\u0435\u0440.",str0025:"\u0422\u043E\u0440\u0433\u043E\u0432\u043E\u0435 \u043D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435",str0026:"\u0418\u041D\u041D/\u041A\u041F\u041F",str0027:"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F",str0028:"\u0424\u0438\u043B\u0438\u0430\u043B",str0029:"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0442\u0435\u043C\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C",str0030:"\u0412\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0442\u0435\u043C\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C"},Eo={str0001:"Para utilizar esse servi\xE7o \xE9 preciso definir o profile a ser utilizado pelo m\xE9todo setProfile"},Do={str0001:"Para utilizar esse servi\xE7o \xE9 preciso definir o profile a ser utilizado pelo m\xE9todo setProfile"},Lo={str0001:"Para utilizar esse servi\xE7o \xE9 preciso definir o profile a ser utilizado pelo m\xE9todo setProfile"},xo={str0001:""},Fo={default:{language:"pt",context:"general",cache:!0},contexts:{login:{en:yo,es:bo,pt:So,ru:Po},session:{en:To,es:Io,pt:Ao,ru:Mo},profileService:{en:Eo,es:Do,pt:Lo,ru:xo},mfa:{en:_o,es:Co,pt:wo,ru:ko},general:{}}},yi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[ht.config(Fo)]})}}return i})(),ei=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,yi]})}}return i})(),bi=(()=>{class i{constructor(e,t,o,n){this.poTheme=e,this.proJsToAdvplService=t,this.proUserProfileService=o,this.proSessionInfoService=n,this.proTheme=new me}setTheme(e,t){let o=this.getProtheusConfig();if(e)this.proTheme.setTheme(e),this.poTheme.setTheme(this.proTheme,t);else switch(o?.Configuration){case 0:this.proTheme.setTheme(W.proThemeTotvsClassic),this.poTheme.setTheme(this.proTheme,ne.light);break;case 1:this.proTheme.setTheme(W.proThemeTotvsClassic),this.poTheme.setTheme(this.proTheme,ne.dark);break;case 2:this.proTheme.setTheme(W.proThemeTotvsSunset),this.poTheme.setTheme(this.proTheme,ne.light);break;default:this.proTheme.setTheme(W.proThemeTotvsClassic),this.poTheme.setTheme(this.proTheme,ne.light)}}getProtheusConfig(){return this.proSessionInfoService.getTheme()}canUseDarkTheme(){return this.proJsToAdvplService.protheusConnected()?this.checkDarkFromAdvpl():j(!0)}checkDarkFromAdvpl(){return this.proJsToAdvplService.buildObservable(({protheusResponse:e,subscriber:t})=>{e.length===0?t.next(!1):e==="true"?t.next(!0):t.next(!1),t.complete()},{autoDestruct:!0,receiveId:"canUseDarkTheme",sendInfo:{type:"canUseDarkTheme"}})}setThemeProfile(e){return this.proJsToAdvplService.protheusConnected()?this.setThemeProfileFromAdvpl(e):this.setThemeProfileFromApi(e)}setThemeProfileFromAdvpl(e){return this.proJsToAdvplService.buildObservable(({protheusResponse:t,subscriber:o})=>{t.length===0?o.next(!1):t==="true"?o.next(!0):o.next(!1),o.complete()},{autoDestruct:!0,receiveId:"setThemeProfile",sendInfo:{type:"setThemeProfile",content:e}})}setThemeProfileFromApi(e){return this.proUserProfileService.setProfile("wAPIpLOGIN","CONFIG","DARK"),this.proUserProfileService.update(e)}getThemeProfile(){return this.proJsToAdvplService.protheusConnected()?this.getThemeProfileFromAdvpl():this.getThemeProfileFromApi()}getThemeProfileFromAdvpl(){return this.proJsToAdvplService.buildObservable(({protheusResponse:e,subscriber:t})=>{e.length===0?t.next(!1):e==="true"?t.next(!0):t.next(!1),t.complete()},{autoDestruct:!0,receiveId:"getDarkUserProfile",sendInfo:{type:"getDarkUserProfile"}})}getThemeProfileFromApi(){return this.proUserProfileService.setProfile("wAPIpLOGIN","CONFIG","DARK"),this.proUserProfileService.read("true","text").pipe(N(e=>e==="true"))}static{this.\u0275fac=function(t){return new(t||i)(c(Fe),c(D),c(vo),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),No=(()=>{class i{constructor(e,t){this.proAuthService=e,this.router=t}canActivate(e,t){let o=t.url;return this.checkLogin(o)}checkLogin(e){return this.proAuthService.isUserAuthenticate?!0:(this.proAuthService.redirectUrl=e,this.router.navigate(["/login"]),!1)}canActivateChild(e,t){return this.canActivate(e,t)}canLoad(e){let t=`/${e.path}`;return this.checkLogin(t)}static{this.\u0275fac=function(t){return new(t||i)(c(ee),c(Se))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ro=(()=>{class i{constructor(e,t){this.injector=e,this.sessionInfoService=t}intercept(e,t){let o,n=this.injector.get(E);return e.url.search(/assets/)>=0?o=this.appendPathNameToUrl(e):n.isProtheusRender?o=this.appendDomainToUrl(e):o=e,t.handle(o)}appendPathNameToUrl(e){let t=this.sessionInfoService.getAppName(),o,r=this.injector.get(E).serverWithApiUrl;if(t===void 0)o=e.clone();else{e.url.substr(0,1)!=="/"&&(t+="/");let p=`${r}/${t}${e.url}`;o=e.clone({url:p})}return o}appendDomainToUrl(e){let o=this.injector.get(E).serverWithApiUrl,n="",r=e.url.toLowerCase();return r.startsWith("http://")||r.startsWith("https://")?n=e.url:n=`${o}${e.url}`,e.clone({url:n})}static{this.\u0275fac=function(t){return new(t||i)(c(Q),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ti=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[{provide:K,useClass:Ro,multi:!0}],imports:[h]})}}return i})(),Oo=(()=>{class i{constructor(e,t){this.injector=e,this.advplService=t}intercept(e,t){let o,n=this.injector.get(E);if(this.isUrlNeedsProAuth(e.url))if(n.isProtheusRender)this.doIHaveAToken()?o=this.appendTokenToRequest(e):o=this.callTokenFromADVPL(e);else return t.handle(e);else o=e.clone();return t.handle(o).pipe(te((r,p)=>{if(!this.isAuthError(r))throw r;return this.isUrlNeedsProAuth(e.url)&&this.doIHaveAToken()?ge(this.appendTokenOnError(e,t)):t.handle(e.clone())}))}isAuthError(e){return e instanceof Ye&&e.status===401}doIHaveAToken(){let t=this.injector.get(ee).token;return!J(t)}callTokenFromADVPL(e){return this.advplService.jsToAdvpl("internalToken",""),e.clone()}appendTokenToRequest(e){let t=this.injector.get(ee);return t.isTokenValid()||t.updateToken(),this.cloneAuthRequest(e,t.token)}appendTokenOnError(e,t){return Ee(this,null,function*(){let o=this.injector.get(ee);return o.isTokenValid()||(yield o.updateToken()),t.handle(this.cloneAuthRequest(e,o.token)).toPromise()})}cloneAuthRequest(e,t){return e.clone({headers:e.headers.set("Authorization",`Bearer ${t.access_token}`)})}isUrlNeedsProAuth(e){let t=!0,o=[/token/,/assets/];for(let n of o)if(e.search(n)>=0){t=!1;break}return t}static{this.\u0275fac=function(t){return new(t||i)(c(Q),c(D))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ii=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[ee,No,He,{provide:K,useClass:Oo,multi:!0}],imports:[h]})}}return i})();var oi="ERPAPPCONFIG",E=(()=>{class i{constructor(e,t,o,n,r){this.http=e,this.advplService=t,this.themeService=o,this.sessionInfoService=n,this.proAuthService=r,this.readyEmitter=new Ge,this.themeService.setTheme()}loadAppConfig(){return this.isProtheusRender&&this.insideProtheus()&&this.proAuthService.isUserAuthenticate&&this.sessionInfoService.setSessionInfo(),this.http.get("assets/data/appConfig.json").toPromise().then(e=>{let t=e;return sessionStorage[oi]===void 0&&(sessionStorage[oi]=JSON.stringify(t)),this.readyEmitter.emit(),this.proAppConfig})}callAppClose(e=!0){e?this.advplService.AdvplCloseApp("force"):this.advplService.AdvplCloseApp()}insideProtheus(){return this.advplService.protheusConnected()}get proAppConfig(){return J(this._ProAppConfig)&&(this._ProAppConfig=this.sessionInfoService.getErpAppConfig()),this._ProAppConfig}get nameApp(){return this.proAppConfig.name}get serverWithApiUrl(){return this.proAppConfig?J(this.proAppConfig.api_baseUrl)?this.proAppConfig.serverBackend+this.proAppConfig.restEntryPoint:this.proAppConfig.api_baseUrl:""}get productLine(){return this.proAppConfig?this.proAppConfig.productLine:""}get isProtheusRender(){return this.productLine.toLowerCase()==="protheus"}freeAppConfig(){this._ProAppConfig=null}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D),c(bi),c(O),c(ee))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),jo=(()=>{class i{constructor(e,t,o){this.http=e,this.advplService=t,this.proAppConfigService=o,this.url="/api/language/v1/protheus-suported-languages",this.useHTTP=!0,this.EVENT_GET_LANGUAGES="getLanguages",this.EVENT_SET_LANGUAGES="setLanguages"}getListOfLanguages(){return this.proAppConfigService.isProtheusRender?this.useHTTP?this.http.get(this.url):this.getAdvplLanguages():j([])}getAdvplLanguages(){return this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(e.length===0)t.error({status:400,description:"No language can be found"});else{let o=JSON.parse(e);t.next(o)}t.complete()},{sendInfo:{type:this.EVENT_GET_LANGUAGES},autoDestruct:!0,receiveId:this.EVENT_SET_LANGUAGES}):this.advplNotPrepared()}advplNotPrepared(){return new I(e=>{e.error({status:400,description:"advplService not prepared in ProLanguageService"}),e.complete()})}isChannelHTTP(){return this.useHTTP}setChannelAsHTTP(e){this.useHTTP=e}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D),c(E))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Vo=(()=>{class i{constructor(e,t,o){this.http=e,this.advplService=t,this.proAppConfigService=o,this.url="/api/framework/v1/FwRestTranslate/",this.useHTTP=!0,this.EVENT_GET_TRANSLATES="getTranslateStringResource",this.EVENT_SET_TRANSLATES="setTranslateStringResource"}getStrList(e){return this.proAppConfigService.isProtheusRender?this.useHTTP?this.http.get(`${this.url}${e}`):this.getAdvplLanguages():j({})}getAdvplLanguages(){return this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:e,subscriber:t})=>{if(e.length===0)t.error({status:400,description:"No translate can be found"});else{let o=JSON.parse(e);t.next(o)}t.complete()},{sendInfo:{type:this.EVENT_GET_TRANSLATES,content:""},autoDestruct:!0,receiveId:this.EVENT_SET_TRANSLATES}):this.advplNotPrepared()}advplNotPrepared(){return new I(e=>{e.error({status:400,description:"advplService not prepared in ProTranslateStringService"}),e.complete()})}isChannelHTTP(){return this.useHTTP}setChannelAsHTTP(e){this.useHTTP=e}static{this.\u0275fac=function(t){return new(t||i)(c(b),c(D),c(E))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),zo=(()=>{class i{constructor(e){this.advplService=e,this.EVENT_SET_FORMAT="setDateFormat",this.EVENT_GET_FORMAT="getDateFormat"}getDateFormat(e){return this.advplService.protheusConnected()?this.advplService.buildObservable(({protheusResponse:t,subscriber:o})=>{t.length===0?o.error({status:400,description:`dateFormat for language ${e||""} could not be found`}):o.next(t),o.complete()},{sendInfo:{type:this.EVENT_GET_FORMAT,content:e},autoDestruct:!0,receiveId:this.EVENT_SET_FORMAT}):this.advplNotPrepared()}advplNotPrepared(){return new I(e=>{e.error({status:400,description:"advplService not prepared in ProDateService"}),e.complete()})}static{this.\u0275fac=function(t){return new(t||i)(c(D))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ni=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,dt]})}}return i})(),ri=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h]})}}return i})(),Bo=(()=>{class i{constructor(e,t){this.injector=e,this.sessionInfoService=t}intercept(e,t){let o=e,n=this.injector.get(E);return e.url.search(/assets/)>=0||n.isProtheusRender&&(o=this.appendLanguageToRequest(e)),t.handle(o)}appendLanguageToRequest(e){let t=this.getLanguage();return t?e.clone({headers:e.headers.set("Accept-Language",t)}):e.clone()}getLanguage(){return this.sessionInfoService.getIdiom()}static{this.\u0275fac=function(t){return new(t||i)(c(Q),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),si=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[jo,{provide:K,useClass:Bo,multi:!0}],imports:[h]})}}return i})(),Uo=(()=>{class i{constructor(e,t){this.injector=e,this.sessionInfoService=t}intercept(e,t){let o=e,n=this.injector.get(E);return e.url.search(/assets/)>=0||n.isProtheusRender&&(o=this.appendModuleToRequest(e)),t.handle(o)}appendModuleToRequest(e){let t=this.getModule();return t?e.clone({headers:e.headers.set("x-erp-module",t)}):e.clone()}getModule(){return this.sessionInfoService.getModule()}static{this.\u0275fac=function(t){return new(t||i)(c(Q),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),qo=(()=>{class i{constructor(e,t){this.injector=e,this.sessionInfoService=t}intercept(e,t){let o=e,n=this.injector.get(E);return e.url.search(/assets/)>=0||n.isProtheusRender&&(o=this.appendDataBaseToRequest(e)),t.handle(o)}appendDataBaseToRequest(e){let t=this.getDatabase();return t?e.clone({headers:e.headers.set("x-erp-database",t)}):e.clone()}getDatabase(){return this.sessionInfoService.getDataBase()}static{this.\u0275fac=function(t){return new(t||i)(c(Q),c(O))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ai=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[po,{provide:K,useClass:Uo,multi:!0},{provide:K,useClass:qo,multi:!0}],imports:[h]})}}return i})(),Ho=(()=>{class i{constructor(e){this.injector=e}intercept(e,t){let o=e,n=this.injector.get(E);return e.url.search(/assets/)>=0||n.isProtheusRender&&(o=this.appendTenantToRequest(e)),t.handle(o)}appendTenantToRequest(e){let t=this.getTenantId();return t?e.clone({headers:e.headers.set("tenantid",t)}):e.clone()}getTenantId(){let e=this.injector.get(vi),o=this.injector.get(qe).company.Code,n=e.branch.Code,r="";if(o!=="")return r+=o,n!==""&&(r+=`,${n},`),r}static{this.\u0275fac=function(t){return new(t||i)(c(Q))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),li=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[qe,vi,{provide:K,useClass:Ho,multi:!0}],imports:[h]})}}return i})(),Wo=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[bi,{provide:"Window",useValue:window}],imports:[h]})}}return i})(),Jo=(()=>{class i{constructor(e,t){this.proAuthService=e,this.proUserInfoService=t}get proThreadInfo(){let e=this.proAuthService.getTokenPayload(),t={};return t.userId=e.userid,t.userName=e.sub,t}get userId(){return this.proAuthService.userId}get userName(){return this.proThreadInfo.userName}getUserInfoThread(){return this.proUserInfoService.get(this.userId,!0).pipe(N(e=>({id:e.id,userName:e.userName,displayName:e.displayName,emails:e.emails})))}static{this.\u0275fac=function(t){return new(t||i)(c(ee),c(He))}}static{this.\u0275prov=g({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ci=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[Jo],imports:[h]})}}return i})(),pi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[Vo],imports:[h]})}}return i})(),di=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({providers:[zo],imports:[h]})}}return i})(),ui=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,ti,ii,Jt,ni,li,ai,si,Wo,ri,ci,pi,ei,di,ti,ii,Jt,ni,li,ai,si,ri,ci,pi,ei,di]})}}return i})();var Ue=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,k,F,ie,T]})}}return i})(),hi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,ce,T,Ue,Z,rt,oe,Ve,Y]})}}return i})();var mi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[h,Wt,Y]})}}return i})(),gi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[yi,Yt,Z,mi,Ue,hi,Yt,mi,Ue,hi]})}}return i})(),fi=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[Ve,gi,Ve,gi]})}}return i})(),Si=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=u({type:i})}static{this.\u0275inj=d({imports:[fi,ui,fi,ui]})}}return i})();function Qo(i,m){i&1&&(y(0,"div",5)(1,"p"),w(2,"Teste "),y(3,"b"),w(4,"PO UI"),S()()())}var Me=class i{constructor(m,e){this.proAppConfigService=m;this.router=e;this.proAppConfigService.insideProtheus()?sessionStorage.setItem("insideProtheus","1"):(this.proAppConfigService.loadAppConfig(),sessionStorage.setItem("insideProtheus","0"),sessionStorage.setItem("ERPTOKEN",'{"access_token": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6InBKd3RQdWJsaWNLZXlGb3IyNTYifQ.eyJpc3MiOiJUT1RWUy1BRFZQTC1GV0pXVCIsInN1YiI6ImRhbmllbC5hdGlsaW8iLCJpYXQiOjE3NTAzMjU5NzYsInVzZXJpZCI6IjAwMDAwNCIsImV4cCI6MTc1MDMyOTU3NiwiZW52SWQiOiJQUk9USEVVU19PUCJ9.R0VfPdL9VfkromkrDn3Boe0V9fIZ4cqBn2sYSPyFQrENT0jQ6ZCMxlzAmkFy4V_WuvwfKmSVeHXKsweBoDCDxrGLtAhKx6XLSI7OyVOPipwSKpyGkTjtkr0uPYuu4K6i5kRQn0oO1UuHV4rBcw7XWlImHtjNoAuVaUI84sVXHqw7YQCaVuSlWTdEr03TdEPpoisuBz07i-bxq7e56DLc5LgjyhOO5-Lld3KA1cAVcb3FaeSWl8X3aheneWsw3w-3-pZUMLxlWDWJihtmnIij4K1HxnXLxjiyQeY3wh6NJ9cwwrsxu-NT2_dOSDXFUXqTV8lHr8zYNuyUsTuOLLvZ2A","refresh_token": "naPdpnp1C8fAr6dR4zNzc2--.irD44lZmDMzBqKxSzAM2PlGHkySNJOmcYOV3QA84GqpJl-zhzXv_QR8iIZOTnMgdI7A5RS5VHiKpFpfqnifuwR5dG5MMlZvQCgrsFjWm_PIQPQhpGLHkKM_Lo7d2L-Lpc9QdR-qo3pVIOFujeVo8aRXXsG5BK5SIvvY-TCSUFT0bj5RUMRrHS_v08dWIuLXSGkUl1-gxH8o2HKZZqBeV3xZndLoShw.ASIiFPmDKD24fLJAZ5ZFuAcAx5QfGY6rpEH_vk0DKmBSrbd2hbY14c-qVDjdi_-ardiSwyBmtxsCCTSimXJTBniOpwjOwg8PM6qCxJVZIqzze65Uao0o9v--2cCmIewVF4x2lox78x-yW2RCffRBNNbCo8CwPMSlWRB5ibufdx4HPhBsq7P41p928tvfI8wUbq9WjzRToEI-vEeIS8MQhNgGIYy6yfju08IUy_b_aQn9brXcGssibyjRARe9i06NOIWOgaSX4vTyt44d2yY2xCdw_v-dH-C93J7YCbc-jrUmaFlJI20Bq5UHLIzzGEje0sJWZ7FEKSx3axygWZ-Lng","scope": "default","token_type": "Bearer","expires_in": 3600, "hasMFA": false}'))}menus=[{label:"Visualizar",action:this.viewClick.bind(this),icon:"po-icon-clipboard",shortLabel:"Visualizar"},{label:"Ajuda (Help)",action:this.aboutClick.bind(this),icon:"po-icon-help",shortLabel:"Ajuda"},{label:"Sair",action:this.closeApp.bind(this),icon:"po-icon-exit",shortLabel:"Sair"}];viewClick(){this.router.navigate(["/","view"])}aboutClick(){this.router.navigate(["/","about"])}closeApp(){this.proAppConfigService.insideProtheus()?this.proAppConfigService.callAppClose():alert("Clique n\xE3o veio do Protheus")}static \u0275fac=function(e){return new(e||i)(V(E),V(Se))};static \u0275cmp=z({type:i,selectors:[["app-root"]],decls:6,vars:4,consts:[[1,"po-wrapper"],["p-title","Transportadoras"],[3,"p-collapsed","p-filter","p-menus","p-automatic-toggle"],["class","po-p-2 po-font-title",4,"p-menu-header-template"],["p-title","Consulta de Transportadoras"],[1,"po-p-2","po-font-title"]],template:function(e,t){e&1&&(y(0,"div",0),A(1,"po-toolbar",1),y(2,"po-menu",2),ye(3,Qo,5,0,"div",3),S(),y(4,"po-page-default",4),A(5,"router-outlet"),S()()),e&2&&(R(2),x("p-collapsed",!1)("p-filter",!0)("p-menus",t.menus)("p-automatic-toggle",!1))},dependencies:[h,wt,Ct,Pt,St,bt,X,Ne,Si,tt],styles:["po-menu[_ngcontent-%COMP%]{--color: #B4E2FD;--background-color: #2C3739;--color-menu-color-menu-item-text: #B4E2FD}.po-font-title[_ngcontent-%COMP%]{color:#b4e2fd}"]})};et(Me,Mt).catch(i=>console.error(i));
